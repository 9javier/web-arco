<div class="main-element">
  <div class="table-header">
    <h2 class="title-table">
      Asignaciones del Equipo
    </h2>

    <div class="buttons-action">
      <ion-icon matTooltip="Actualizar" matTooltipClass="tooltip" name="refresh" (click)="userSelected()" [ngClass]="userAssignationsAreLoading() ? 'disabled' : ''"></ion-icon>
      <ion-icon matTooltip="{{enlarged ? 'Contraer' : 'Expandir'}}" matTooltipClass="tooltip" [name]="enlarged ? 'contract' : 'expand'" (click)="enlarge()"></ion-icon>
    </div>
  </div>

  <div class="legend">
    <div>
      <div class="picking other"></div>
      <p>Pickings en curso</p>
    </div>
    <div>
      <div class="picking direct"><div></div></div>
      <p>Picking directo</p>
    </div>
    <div>
      <div class="picking consolidated"><div></div></div>
      <p>Picking consolidado</p>
    </div>
  </div>

  <div class="loader" *ngIf="userAssignationsAreLoading()">
    <div class="spinner">
      <p class="message">Cargando asignaciones del equipo</p>
      <ion-spinner name="dots"></ion-spinner>
    </div>
  </div>

  <div class="empty-list" *ngIf="!userAssignationsAreLoading() && listTeamAssignations.length < 1">
    <p class="message-empty">No hay asignaciones del equipo cargadas</p>
  </div>

  <div class="scroll-list" *ngIf="!userAssignationsAreLoading()">
    <mat-grid-list
      *ngFor="let teamAssignation of listTeamAssignations; let i = index"
      class="team-assignations-line"
      [cols]="maxSizeForCols"
      rowHeight="48px">
      <mat-grid-tile class="employee" [colspan]="maxSizeForNameCol">
        <div class="tile-value">{{teamAssignation.user.name}}</div>
      </mat-grid-tile>
      <mat-grid-tile
        class="assignation"
        *ngFor="let assignation of teamAssignation.pickingShoes"
        [ngClass]="assignation.temporary ? 'temporal' : 'fixed'"
        [colspan]="stringToInt(assignation.quantityShoes)"
        matTooltipPosition="above"
        [matTooltip]="tooltipValue"
        [matTooltipDisabled]="tooltipValue == null"
        (mouseover)="showConsolidatedBreakdown(assignation.pickingId)">
        <div class="tile-value">{{assignation.quantityShoes}}</div>
        <div class="tile-picking-type" [ngClass]="assignation.temporary ? assignation.pickingTypeId.id == 1 ? 'temporal direct' : 'temporal consolidated' : 'fixed'"></div>
      </mat-grid-tile>
    </mat-grid-list>
  </div>
</div>
