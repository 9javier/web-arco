<div class="main-element">
  <div class="table-header">
    <h2 class="title-table">
      Operaciones de Env√≠o
    </h2>

    <div class="buttons-action">
      <ion-icon matTooltip="Actualizar operaciones de env√≠o" matTooltipClass="tooltip" name="refresh" (click)="orderAssignment()" [ngClass]="requestsOrdersAreLoading() ? 'disabled' : ''"></ion-icon>
      <ion-icon matTooltip="{{enlarged ? 'Contraer' : 'Expandir'}}" matTooltipClass="tooltip" [name]="enlarged ? 'contract' : 'expand'" (click)="enlarge()"></ion-icon>
    </div>
  </div>

  <mat-grid-list class="title-line" cols="24" rowHeight="48px">
    <mat-grid-tile class="checkbox" colspan="1">
      <div class="tile-value left-value">
        <ion-checkbox [(ngModel)]="allRequestOrdersSelected" (ngModelChange)="selectAllRequestOrder()"></ion-checkbox>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="reference border-right" colspan="2">
      <div class="tile-value">
        <span class="title" (click)="sort('reference')">Ref. ü°á</span>
        <suite-filter-button
          class="filter"
          [title]="'Referencia'"
          [listItems]="listRequestsFilters"
          [isFiltering]="isFilteringRequests != this.listRequestsFilters.length"
          (applyFilters)="applyFilters($event)">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="date border-right" colspan="3">
      <div class="tile-value">
        <span class="title" (click)="sort('date')">Fecha</span>
        <suite-filter-button
          class="filter"
          [title]="'Fecha'"
          [listItems]="listDateFilters"
          [isFiltering]="isFilteringDate != this.listDateFilters.length"
          (applyFilters)="applyFilters($event)">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="origin border-right" colspan="4">
      <div class="tile-value">
        <span class="title" (click)="sort('origin')">Origen</span>
        <suite-filter-button
          class="filter"
          [title]="'Origen'"
          [listItems]="listOriginFilters"
          [isFiltering]="isFilteringOrigin != this.listOriginFilters.length"
          (applyFilters)="applyFilters($event)">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="destiny border-right" colspan="4">
      <div class="tile-value">
        <span class="title" (click)="sort('destiny')">Destino</span>
        <suite-filter-button
          class="filter"
          [title]="'Destino'"
          [listItems]="listDestinyFilters"
          [isFiltering]="isFilteringDestiny != this.listDestinyFilters.length"
          (applyFilters)="applyFilters($event)">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="destiny-max border-right" colspan="2">
      <div class="tile-value">
        <span class="title" (click)="sort('destiny-max')">M√°ximo</span>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="type border-right" colspan="4">
      <div class="tile-value">
        <span class="title" (click)="sort('type')">Tipo</span>
        <suite-filter-button
          class="filter"
          [title]="'Tipo'"
          [listItems]="listTypeFilters"
          [isFiltering]="isFilteringType != this.listTypeFilters.length"
          (applyFilters)="applyFilters($event)">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="quantity border-right" colspan="2">
      <div class="tile-value">
        <span class="title" (click)="sort('quantity')">Pares</span>
        <suite-filter-button
          class="filter"
          [title]="'Pares'"
          [listItems]="listQuantitiesFilters"
          [isFiltering]="isFilteringQuantities != this.listQuantitiesFilters.length"
          (applyFilters)="applyFilters($event)"
          [filterType]="'slider'">
        </suite-filter-button>
      </div>
    </mat-grid-tile>

    <mat-grid-tile class="quantity-launch" colspan="2">
      <div class="tile-value">
        <span class="title" (click)="sort('quantity-launch')">Pares Lanzar</span>
        <suite-filter-button
          class="filter"
          [title]="'Pares Lanzar'"
          [listItems]="listQuantitiesLaunchFilters"
          [isFiltering]="isFilteringQuantitiesLaunch != this.listQuantitiesLaunchFilters.length"
          (applyFilters)="applyFilters($event)"
          [filterType]="'slider'">
        </suite-filter-button>
      </div>
    </mat-grid-tile>
  </mat-grid-list>

  <div class="loader" *ngIf="requestsOrdersAreLoading()">
    <div class="spinner">
      <p class="message">Cargando operaciones de env√≠o</p>
      <ion-spinner name="dots"></ion-spinner>
    </div>
  </div>

  <div class="empty-list" *ngIf="!requestsOrdersAreLoading() && listRequestOrders.length < 1">
    <p class="message-empty">No hay operaciones de env√≠o cargadas</p>
  </div>

  <div class="scroll-list" *ngIf="!requestsOrdersAreLoading()">
    <mat-grid-list *ngFor="let requestOrder of listRequestOrders; let i = index" class="requests-orders-line" cols="24" rowHeight="48px">
      <mat-grid-tile class="checkbox" colspan="1">
        <div class="tile-value left-value">
          <ion-checkbox [(ngModel)]="requestOrdersSelection[requestOrder.request.id]" (ngModelChange)="selectRequestOrder(false, true)"></ion-checkbox>
        </div>
      </mat-grid-tile>

      <mat-grid-tile class="reference border-right" colspan="2">
        <div class="tile-value">{{requestOrder.request.requestId}}</div>
      </mat-grid-tile>

      <mat-grid-tile class="date border-right" colspan="3">
        <div class="tile-value">
          <div class="tile-date">{{dateCreatedParsed(requestOrder)}}</div>
          <div>{{timeCreatedParsed(requestOrder)}}</div>
        </div>
      </mat-grid-tile>

      <mat-grid-tile class="origin border-right" colspan="4">
        <div class="tile-value">{{requestOrder.originWarehouse.reference}} {{requestOrder.originWarehouse.name}}</div>
      </mat-grid-tile>

      <mat-grid-tile class="destiny border-right" colspan="4">
        <div class="tile-value">{{requestOrder.destinyWarehouse.reference}} {{requestOrder.destinyWarehouse.name}}</div>
      </mat-grid-tile>

      <mat-grid-tile class="destiny-max border-right" colspan="2">
        <div class="tile-value">
          {{requestOrder.destinyWarehouse.thresholdShippingStore ? '['+requestOrder.destinyWarehouse.thresholdShippingStore+']' : '-'}}
        </div>
      </mat-grid-tile>

      <mat-grid-tile class="type border-right" colspan="4">
        <div class="tile-value">{{requestOrder.preparationLinesTypes.name}}</div>
      </mat-grid-tile>

      <mat-grid-tile class="quantity border-right" colspan="2">
        <div class="tile-value">{{requestOrder.quantityOrder}}</div>
      </mat-grid-tile>

      <mat-grid-tile class="quantity-launch" colspan="2">
        <div class="tile-value">{{requestOrder.quantityMatchWarehouse}}</div>
      </mat-grid-tile>
    </mat-grid-list>
  </div>
</div>
