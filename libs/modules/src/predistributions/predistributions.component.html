<ion-content>

  <div class="incidences-container">
    <mat-table [dataSource]="dataSource" matSort class="table-incidences">
      <ng-container matColumnDef="select">
        <mat-header-cell class="my-sticky-col info number" *matHeaderCellDef mat-sort-header>
          <div>Select</div>
                    <div></div>
                    <div class="content-checkbox">
                      <ng-container *ngIf="dataSource !== undefined" >
                        <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                                      [matRippleColor]="'white'" class="custom-checkbox" (change)="$event ? masterToggle() : null"
                                      [checked]="selection.hasValue() && isAllSelected()"
                                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                                      [aria-label]="checkboxLabel()">
                        </mat-checkbox>
                      </ng-container>
                    </div>
          </mat-header-cell>
        <mat-cell *matCellDef="let element,let row" class="my-sticky-col info number">
          <ng-container *ngIf="dataSource !== undefined" >
                        <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                                      [matRippleColor]="'black'" (click)="$event.stopPropagation()"
                                      (change)="$event ? selection.toggle(row) : null"
                                      [checked]="selection.isSelected(row)"
                                      [aria-label]="checkboxLabel(row)">
                        </mat-checkbox>
                      </ng-container>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="article">
        <mat-header-cell class="my-sticky-col info type-120" *matHeaderCellDef mat-sort-header>

          Articole</mat-header-cell>
        <mat-cell *matCellDef="let element" class="my-sticky-col info type-120"> {{element.article}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="model">
        <mat-header-cell class="my-sticky-col info type-240" *matHeaderCellDef mat-sort-header>
          Modelos
          <suite-filter-button class="ion-margin-vertical" #filterButtonModels [title]="'Modelos'" [listItems]="entities.models"
                               [isFiltering]="isFilteringModels != entities.models.length"
                               (applyFilters)="applyFilters($event, 'models')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="my-sticky-col info type-240">{{element.model.name}}  </mat-cell>
      </ng-container>

      <ng-container matColumnDef="store">
        <mat-header-cell class="my-sticky-col info type-360" *matHeaderCellDef mat-sort-header>Tiendas
          <suite-filter-button class="ion-margin-vertical filter" #filterButtonWarehouses [title]="'Tiendas'" [listItems]="entities.destinyShop"
                               [isFiltering]="isFilteringWarehouses != entities.destinyShop.length"
                               (applyFilters)="applyFilters($event, 'warehouses')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="my-sticky-col info type-360"> {{element.warehouse.name}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="size">
        <mat-header-cell class="my-sticky-col info process" *matHeaderCellDef mat-sort-header>Tallas
          <suite-filter-button class="ion-margin-vertical filter" #filterButtonSizes [title]="'Tallas'"
                               [listItems]="entities.sizes"
                               [isFiltering]="isFilteringSizes != entities.sizes.length"
                               (applyFilters)="applyFilters($event, 'sizes')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="my-sticky-col info process">{{element.size.name}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="brand">
        <mat-header-cell class="info-product" *matHeaderCellDef mat-sort-header>Marcas
          <suite-filter-button class="ion-margin-vertical filter" #filterButtonBrands [title]="'Marcas'" [listItems]="entities.brands"
                               [isFiltering]="isFilteringBrands != entities.brands.length"
                               (applyFilters)="applyFilters($event, 'brands')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="info-product">{{element.brand.name}}  </mat-cell>
      </ng-container>

      <ng-container matColumnDef="color">
        <mat-header-cell class="info-product" *matHeaderCellDef mat-sort-header>Colores
          <suite-filter-button class="ion-margin-vertical filter" #filterButtonColors [title]="'Colores'" [listItems]="entities.colors"
                               [isFiltering]="isFilteringColors != entities.colors.length"
                               (applyFilters)="applyFilters($event, 'colors')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="info-product">{{element.color.name}}  </mat-cell>
      </ng-container>

      <ng-container matColumnDef="provider">
        <mat-header-cell class="info-product" *matHeaderCellDef mat-sort-header>Proveedores
          <suite-filter-button class="ion-margin-vertical filter" #filterButtonProviders [title]="'Proveedores'" [listItems]="entities.provider"
                               [isFiltering]="isFilteringProviders != entities.colors.length"
                               (applyFilters)="applyFilters($event, 'providers')">
          </suite-filter-button>
        </mat-header-cell>
        <mat-cell *matCellDef="let element" class="info-product"> {{element.provider.name}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="date_service">
        <mat-header-cell class="info-product" *matHeaderCellDef mat-sort-header>Fecha de servicio</mat-header-cell>
        <mat-cell *matCellDef="let element" class="info-product">{{element.date_service}}  </mat-cell>
      </ng-container>
<!--      <ng-container matColumnDef="distribution">-->
<!--        <mat-header-cell class="my-sticky-col info-status status" *matHeaderCellDef mat-sort-header>-->
<!--          <div>Predistribución</div>-->
<!--          <div>bloqueada</div>-->

<!--          <ng-container *ngIf="dataSource !== undefined" >-->
<!--            <div class="my-sticky-col info-status status">-->

<!--              <mat-checkbox-->
<!--                [checked]="isCheckedStatusBlockedAll()"-->
<!--                (click)="$event.stopPropagation()"-->
<!--                (change)="changeStatusBlockedAll($event)"-->
<!--                class="my-sticky-col info-status status">-->
<!--              </mat-checkbox>-->
<!--            </div>-->
<!--          </ng-container>-->

<!--        </mat-header-cell>-->
<!--        <mat-cell *matCellDef="let element,let row" class="my-sticky-col info-status status">-->
<!--          <mat-checkbox [checked]="isCheckedStatusBlocked(element)"-->
<!--                        (click)="$event.stopPropagation()"-->
<!--                        (change)="changeStatusBlocked($event, element)">-->
<!--          </mat-checkbox>-->
<!--        </mat-cell>-->
<!--      </ng-container>-->
      <ng-container matColumnDef="distribution">
        <mat-header-cell class="my-sticky-col info-status date-status" *matHeaderCellDef  mat-sort-header>
<!--          <div>Stock</div>-->
          <div>Reservado</div>
          <ng-container *ngIf="dataSource !== undefined" >
            <div class="my-sticky-col info-status date-status">
              <mat-checkbox
                [checked]="isCheckedStatusReservedAll()"
                (click)="$event.stopPropagation()"
                (change)="changeStatusReservedAll($event)">
              </mat-checkbox>
            </div>
          </ng-container>
        </mat-header-cell>
        <mat-cell class="my-sticky-col info-status date-status" *matCellDef="let row; let element">
          <ng-container *ngIf="dataSource !== undefined" >
            <mat-checkbox [checked]="isCheckedStatusReserved(element)"
                          (click)="$event.stopPropagation()"
                          (change)="changeStatusReserved($event, element)">
            </mat-checkbox>
          </ng-container>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="reserved">
        <mat-header-cell class="my-sticky-col info-status time-status" *matHeaderCellDef mat-sort-header>
          <!--          <div>Stock</div>-->
          <div>Bloqueada</div>
          <ng-container *ngIf="dataSource !== undefined">
            <div class="my-sticky-col info-status time-status">

              <mat-checkbox
                [checked]="isCheckedStatusBlockedAll()"
                (click)="$event.stopPropagation()"
                (change)="changeStatusBlockedAll($event)"
                class="custom-checkbox">
              </mat-checkbox>

            </div>
          </ng-container>
        </mat-header-cell>
        <mat-cell class="my-sticky-col info-status time-status" *matCellDef="let row; let element">
          <ng-container *ngIf="dataSource !== undefined">
            <mat-checkbox [checked]="isCheckedStatusBlocked(element)"
                          (click)="$event.stopPropagation()"
                          (change)="changeStatusBlocked($event, element)">
            </mat-checkbox>
          </ng-container>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;" class="incidence-row">
      </mat-row>

    </mat-table>

  </div>
  <suite-paginator [pagerValues]="pagerValues"></suite-paginator>


<!-- TODO table of list products -->
<!--  <div class="incidences-container">-->
<!--    <table mat-table [dataSource]="dataSource" class="table-incidences" matSort>-->
<!--    <ng-container matColumnDef="select">-->
<!--        <th mat-header-cell *matHeaderCellDef class="header-checkbox">-->
<!--          <div>Todas</div>-->
<!--          <div></div>-->
<!--          <div class="content-checkbox">-->
<!--            <ng-container *ngIf="dataSource !== undefined" >-->
<!--              <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"-->
<!--                            [matRippleColor]="'white'" class="custom-checkbox" (change)="$event ? masterToggle() : null"-->
<!--                            [checked]="selection.hasValue() && isAllSelected()"-->
<!--                            [indeterminate]="selection.hasValue() && !isAllSelected()"-->
<!--                            [aria-label]="checkboxLabel()">-->
<!--              </mat-checkbox>-->
<!--            </ng-container>-->
<!--          </div>-->
<!--        </th>-->
<!--        <td mat-cell *matCellDef="let row">-->
<!--          <ng-container *ngIf="dataSource !== undefined" >-->
<!--            <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"-->
<!--                          [matRippleColor]="'black'" (click)="$event.stopPropagation()"-->
<!--                          (change)="$event ? selection.toggle(row) : null"-->
<!--                          [checked]="selection.isSelected(row)"-->
<!--                          [aria-label]="checkboxLabel(row)">-->
<!--            </mat-checkbox>-->
<!--          </ng-container>-->
<!--        </td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="article">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Artículo </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="model">-->
<!--        <mat-header-cell class="info-product">-->
<!--          <th mat-header-cell *matHeaderCellDef mat-sort-header> Modelos </th>-->
<!--          <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--        </mat-header-cell>-->


<!--      </ng-container>-->
<!--      <ng-container matColumnDef="brand">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Marcas </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--      </ng-container>-->
<!--      <ng-container matColumnDef="size">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tallas </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--      </ng-container>-->
<!--      <ng-container matColumnDef="color">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Colores </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--      </ng-container>-->
<!--      <ng-container matColumnDef="provider">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Provedores </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.article}} </td>-->
<!--      </ng-container>-->


<!--      <ng-container matColumnDef="store">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tienda </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.warehouse.name}} </td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="date_service">-->
<!--        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de servicio </th>-->
<!--        <td mat-cell *matCellDef="let element"> {{element.date_service}} </td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="distribution">-->
<!--        <th mat-header-cell *matHeaderCellDef class="header-checkbox">-->
<!--          <div>Predistribución</div>-->
<!--          <div>bloqueada</div>-->
<!--          <ng-container *ngIf="dataSource !== undefined" >-->
<!--            <div class="content-checkbox">-->

<!--              TODO bloqueada methos-->
<!--              <mat-checkbox-->
<!--                [checked]="isCheckedStatusBlockedAll()"-->
<!--                (click)="$event.stopPropagation()"-->
<!--                (change)="changeStatusBlockedAll($event)"-->
<!--                class="custom-checkbox">-->
<!--              </mat-checkbox>-->

<!--            </div>-->
<!--          </ng-container>-->
<!--        </th>-->
<!--        <td mat-cell *matCellDef="let row; let element;">-->
<!--          <ng-container *ngIf="dataSource !== undefined" >-->
<!--              TODO bloqueda methos-->
<!--            <mat-checkbox [checked]="isCheckedStatusBlocked(element)"-->
<!--                          (click)="$event.stopPropagation()"-->
<!--                          (change)="changeStatusBlocked($event, element)">-->
<!--            </mat-checkbox>-->

<!--          </ng-container>-->
<!--        </td>-->
<!--      </ng-container>-->

<!--      <ng-container matColumnDef="reserved">-->
<!--        <th mat-header-cell *matHeaderCellDef class="header-checkbox">-->
<!--          <div>Stock</div>-->
<!--          <div>Reservado</div>-->
<!--          <ng-container *ngIf="dataSource !== undefined" >-->
<!--            <div class="content-checkbox">-->
<!--              <mat-checkbox-->
<!--              [checked]="isCheckedStatusReservedAll()"-->
<!--              (click)="$event.stopPropagation()"-->
<!--              (change)="changeStatusReservedAll($event)">-->
<!--                          </mat-checkbox>-->
<!--                        </div>-->
<!--          </ng-container>-->
<!--          </th>-->
<!--                    <td mat-cell *matCellDef="let row; let element">-->
<!--                      <ng-container *ngIf="dataSource !== undefined" >-->
<!--                        <mat-checkbox [checked]="isCheckedStatusReserved(element)"-->
<!--                                      (click)="$event.stopPropagation()"-->
<!--                                      (change)="changeStatusReserved($event, element)">-->
<!--                                    </mat-checkbox>-->
<!--                                  </ng-container>-->
<!--                      </td>-->
<!--          </ng-container>-->

<!--      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>-->
<!--      <tr mat-row *matRowDef="let row; columns: displayedColumns;"-->
<!--            (click)="selection.toggle(row)"></tr>-->
<!--    </table>-->
<!--    <suite-paginator [pagerValues]="pagerValues"></suite-paginator>-->
<!--    &lt;!&ndash; <mat-paginator [length]="length"  [pageSizeOptions]="pagerValues" showFirstLastButtons></mat-paginator> &ndash;&gt;-->
<!--  </div>-->
</ion-content>
<ion-footer>
  <ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button matTooltip="Guardar Predistibuciones" matTooltipClass="tooltip" (click)="savePredistributions()">
      <ion-icon name="save"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-footer>
