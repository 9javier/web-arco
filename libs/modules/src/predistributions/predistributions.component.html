<ion-content>
  <div class="content-table-distributions">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef class="header-checkbox">
          <div>Todas</div>
          <div></div>
          <div class="content-checkbox">
            <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                          [matRippleColor]="'white'" class="custom-checkbox" (change)="$event ? masterToggle() : null"
                          [checked]="selection.hasValue() && isAllSelected()"
                          [indeterminate]="selection.hasValue() && !isAllSelected()"
                          [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </div>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                        [matRippleColor]="'black'" (click)="$event.stopPropagation()"
                        (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)"
                        [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="article">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Artículo </th>
        <td mat-cell *matCellDef="let element"> {{element.article.reference}} </td>
      </ng-container>

      <ng-container matColumnDef="store">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tienda </th>
        <td mat-cell *matCellDef="let element"> {{element.warehouse.name}} </td>
      </ng-container>

      <ng-container matColumnDef="date_service">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de servicio </th>
        <td mat-cell *matCellDef="let element"> {{element.date_service}} </td>
      </ng-container>

      <ng-container matColumnDef="distribution">
        <th mat-header-cell *matHeaderCellDef class="header-checkbox">
          <div>Predistribución</div>
          <div>bloqueada</div>
          <div class="content-checkbox">
            <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                          [matRippleColor]="'white'" class="custom-checkbox" (change)="$event ? predistributionToggle() : null"
                          [checked]="selectionPredistribution.hasValue() && isAllSelectedPredistribution()"
                          [indeterminate]="selectionPredistribution.hasValue() && !isAllSelectedPredistribution()"
                          [aria-label]="checkboxLabelPredistribution()">
            </mat-checkbox>
          </div>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                        [matRippleColor]="'black'" (click)="$event.stopPropagation()"
                        (change)="$event ? selectionPredistribution.toggle(row) : null; changePredistribution(row)"
                        [checked]="selectionPredistribution.isSelected(row)"
                        [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="reserved">
        <th mat-header-cell *matHeaderCellDef class="header-checkbox">
          <div>Stock</div>
          <div>Reservado</div>
          <div class="content-checkbox">
            <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                          [matRippleColor]="'white'" class="custom-checkbox" (change)="$event ? reservedToggle() : null"
                          [checked]="selectionReserved.hasValue() && isAllSelectedReserved()"
                          [indeterminate]="selectionReserved.hasValue() && !isAllSelectedReserved()"
                          [aria-label]="checkboxLabelReserved()">
            </mat-checkbox>
          </div>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox disableRipple matRipple [matRippleCentered]="true" [matRippleUnbounded]="true" [matRippleRadius]="20"
                        [matRippleColor]="'black'" (click)="$event.stopPropagation()"
                        (change)="$event ? selectionReserved.toggle(row) : null; changeReserved(row)"
                        [checked]="selectionReserved.isSelected(row)"
                        [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          (click)="selection.toggle(row)">
      </tr>
    </table>
    <mat-paginator [pageSize]="50" [pageSizeOptions]="[50, 100, 1000]" showFirstLastButtons></mat-paginator>
  </div>
</ion-content>
<ion-footer>
  <ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button (click)="savePredistributions()">
      <ion-icon name="save"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-footer>
