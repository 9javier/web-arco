<ion-content padding="true">
  <div class="mat-table-wrapper-overflow-x">
    <table mat-table [dataSource]="dataSource">

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <ng-container matColumnDef="providers">
        <th mat-header-cell *matHeaderCellDef>
          <span class="title" (click)="sort('provider')">Proveedor</span>
          <suite-filter-button #filterButtonProviders class="filter" [title]="'Proveedores'" [listItems]="providers"
                               [isFiltering]="isFilteringProviders != providers.length"
                               (applyFilters)="applyFilters($event, 'providers')">
          </suite-filter-button>
        </th>
        <td mat-cell *matCellDef="let element" (click)="updateSupplierConditions($event, element)">
          {{ element?.provider?.name }}
        </td>
      </ng-container>

      <ng-container matColumnDef="brands">
        <th mat-header-cell *matHeaderCellDef>
          <span class="title" (click)="sort('brand')">Marca</span>
          <suite-filter-button #filterButtonBrands class="filter" [title]="'Marcas'" [listItems]="brands"
                               [isFiltering]="isFilteringBrands != brands.length" (applyFilters)="applyFilters($event, 'brands')">
          </suite-filter-button>
        </th>
        <td mat-cell *matCellDef="let element" (click)="updateSupplierConditions($event, element)">
          {{ element?.brand?.name }}
        </td>
      </ng-container>

      <ng-container matColumnDef="noClaim">
        <th mat-header-cell *matHeaderCellDef>
          <span class="title" (click)="sort('noClaim')">No Claim</span>
          <suite-filter-button #filterButtonNoClaim class="filter" [title]="'No Claim'" [listItems]="noClaim"
                               [isFiltering]="isFilteringNoClaim != noClaim.length" (applyFilters)="applyFilters($event, 'noClaim')">
          </suite-filter-button>
        </th>
        <td mat-cell *matCellDef="let element" (click)="updateSupplierConditions($event, element)">
          {{ element?.noClaim && element?.noClaim==true ? 'SÃ­' : 'No' }}
        </td>
      </ng-container>

      <ng-container matColumnDef="contacts">
        <th mat-header-cell *matHeaderCellDef>
          <span class="title" (click)="sort('contact')">Contacto</span>
          <suite-filter-button #filterButtonContacts class="filter" [title]="'Contactos'" [listItems]="contacts"
                               [isFiltering]="isFilteringContacts != contacts.length" (applyFilters)="applyFilters($event, 'contacts')">
          </suite-filter-button>
        </th>
        <td mat-cell *matCellDef="let element" ((click)="updateSupplierConditions($event, element)">
          {{ element?.contact}}
        </td>
      </ng-container>

      <ng-container matColumnDef="observations">
        <th mat-header-cell *matHeaderCellDef>
          <span class="title">Observaciones</span>
        </th>
        <td mat-cell *matCellDef="let element" (click)="updateSupplierConditions($event, element)">
          {{ element?.observations }}
        </td>
      </ng-container>

      <ng-container matColumnDef="select" [formGroup]="selectedForm">
        <th mat-header-cell *matHeaderCellDef>
          <ion-checkbox (ionChange)="selectAll($event)"></ion-checkbox>
        </th>
        <td mat-cell *matCellDef="let element;let i = index" (click)="prevent($event)">
          <ng-template [ngIf]="selectedForm['controls']?.toSelect">
            <ion-checkbox [formControl]="selectedForm['controls']?.toSelect['controls'][i]"
                          (click)="itemSelected(element)"></ion-checkbox>
          </ng-template>
        </td>
      </ng-container>

    </table>
  </div>

  <suite-paginator [pagerValues]="pagerValues"></suite-paginator>

</ion-content>

<ion-fab vertical="bottom" horizontal="end" class="horizontal-fab">
  <ion-fab-button matTooltip="Eliminar condiciones de proveedor" matTooltipClass="tooltip" (click)="presentAlertDeleteConfirm()" *ngIf="selectedForm['controls']?.toSelect
   && selectedForm.valid" color="danger">
    <i class="material-icons">delete</i>
  </ion-fab-button>

  <ion-fab-button matTooltip="Crear condiciones de proveedor" matTooltipClass="tooltip" (click)="addSupplierConditions($event)"><i
    class="material-icons">add</i>
  </ion-fab-button>

  <ion-fab-button matTooltip="Exportar a Excel" matTooltipClass="tooltip" (click)="fileExcell()">
    <ion-icon name="document"></ion-icon>
  </ion-fab-button>

  <ion-fab-button matTooltip="Recargar datos" matTooltipClass="tooltip" (click)="refreshSupplierConditions()">
    <ion-icon name="refresh"></ion-icon>
  </ion-fab-button>
</ion-fab>






