<ion-content>
    <ion-text color="primary">
        <h1>Gesti√≥n de usuarios</h1>
    </ion-text>
    <form *ngIf="formGroup && displayedColumns" [formGroup]="formGroup">
        <table mat-table [dataSource]="formGroup.controls.users.controls">

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Usuario</th>
                <td mat-cell *matCellDef="let user; let i = index">
                    {{ user.value.name }}
                </td>
            </ng-container>

            <ng-container *ngFor="let process of typeProcesses;let i = index" matColumnDef="{{ process.name }}">
                <th mat-header-cell *matHeaderCellDef>{{ process.name }}</th>
                <td mat-cell *matCellDef="let user">
                    <mat-checkbox [formControl]="user.controls.processes.controls[i]"></mat-checkbox>
                </td>
            </ng-container>
            <ng-container matColumnDef="performance">
                <th mat-header-cell *matHeaderCellDef>Productividad</th>
                <td mat-cell *matCellDef="let user; let i = index">
                    <ion-input placeholder="" class="ion-margin-horizontal" type="number" [formControl]="user.controls.performance"></ion-input>
                </td>
            </ng-container>
        </table>
    </form>

    <ion-row class="fab-row-actions">

        <ion-col size="2" size-xs offset="8" offset-lg="10">
            <ion-fab>
                <ion-fab-button color="light" (click)="buildFormWithData()">
                    <ion-icon name="refresh"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

        <ion-col size="2" size-xs>
            <ion-fab (click)="submit()">
                <ion-fab-button color="light">
                    <ion-icon name="save"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

        <ion-col size="2" size-xs>
            <ion-fab>
                <ion-fab-button color="light">
                    <ion-icon name="backspace" (click)="undo()"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

    </ion-row>
    <suite-utils></suite-utils>
</ion-content>