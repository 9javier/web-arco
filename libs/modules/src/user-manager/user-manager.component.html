<ion-content>
    <suite-breadcrumb></suite-breadcrumb>
    <suite-responsive-layout>
        <!--Landscape mode-->
        <form landscape *ngIf="formGroup && displayedColumns" [formGroup]="formGroup">
            <table mat-table [dataSource]="formGroup.controls.users.controls">

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>Usuario</th>
                    <td mat-cell *matCellDef="let user; let i = index">
                        {{ user.value.name }}
                    </td>
                </ng-container>

                <ng-container *ngFor="let process of typeProcesses;let i = index" matColumnDef="{{ process.name }}">
                    <th mat-header-cell *matHeaderCellDef>{{ process.name }}</th>
                    <td mat-cell *matCellDef="let user">
                        <mat-checkbox [formControl]="user.controls.processes.controls[i]"></mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="performance">
                    <th mat-header-cell *matHeaderCellDef>% productividad</th>
                    <td mat-cell *matCellDef="let user; let i = index">
                        <ion-input placeholder="" class="ion-margin-horizontal" type="number" [formControl]="user.controls.performance" min="0"></ion-input>
                    </td>
                </ng-container>
            </table>
        </form>
        <!--Portrait mode-->
        <form portrait *ngIf="formGroup && displayedColumns" [formGroup]="formGroup">
            <div *ngFor="let user of formGroup.controls.users.controls">
                <mat-accordion multi="false">
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <ion-grid>
                                <ion-row>
                                    <ion-col size="3">
                                        <mat-panel-title> {{ user.value.name }} </mat-panel-title>
                                    </ion-col>
                                    <ion-col size="7">
                                        <mat-panel-description></mat-panel-description>
                                    </ion-col>
                                    <ion-col size="1">
                                    </ion-col>
                                </ion-row>
                            </ion-grid>

                        </mat-expansion-panel-header>

                        <ion-list>
                            <ion-item *ngFor="let process of typeProcesses;let i = index">
                                <ion-label>
                                    {{process.name}}
                                </ion-label>
                                <ion-checkbox [formControl]="user.controls.processes.controls[i]"></ion-checkbox>
                            </ion-item>
                            <ion-item>
                                <ion-label>
                                    productividad
                                </ion-label>
                                <ion-input placeholder="" class="productivity" type="number" [formControl]="user.controls.performance" min="0"></ion-input>
                            </ion-item>
                        </ion-list>
                        <mat-list style="display: flex; justify-content:center;"></mat-list>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </form>
    </suite-responsive-layout>


    <ion-row class="fab-row-actions">

        <ion-col size="2" size-xs offset="8" offset-lg="10">
            <ion-fab matTooltip="Recargar" matTooltipClass="tooltip">
                <ion-fab-button color="light" (click)="undo()">
                    <ion-icon name="refresh"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

        <ion-col size="2" size-xs>
            <ion-fab matTooltip="Guardar" matTooltipClass="tooltip" (click)="submit()">
                <ion-fab-button color="light">
                    <ion-icon name="save"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

        <ion-col size="2" size-xs>
            <ion-fab matTooltip="Limpiar" matTooltipClass="tooltip">
                <ion-fab-button color="light">
                    <ion-icon name="backspace" (click)="clear()"></ion-icon>
                </ion-fab-button>
            </ion-fab>
        </ion-col>

    </ion-row>
    <suite-utils></suite-utils>
</ion-content>
