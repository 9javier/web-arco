<ion-header>
  <ion-toolbar color="primary">
    <ion-title> {{title}} </ion-title>
    <ion-buttons slot="end">
      <ion-button matTooltip="Cerrar" matTooltipClass="tooltip" (click)="close()">
        <ion-icon name="close" class="toogleArrow"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <p *ngIf="expedition" class="title">Expedición consultada</p>
  <mat-card *ngIf="expedition">
    <mat-card-header>
      <mat-card-title># {{expedition.reference}}</mat-card-title>
      <mat-card-subtitle>{{expedition.provider_name}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p>
        Nº pallets: <span>{{expedition.expeditionPallets}}</span>
      </p>
      <p>
        Nº bultos: <span>{{expedition.expeditionPackings}}</span>
      </p>
      <p>
        Estados: <span>{{stringStates(expedition.expeditionStates)}}</span>
      </p>
      <p *ngIf="dateTimeParserService.date(expedition.delivery_date) != 'Invalid date'">
        Fecha de envío: <span>{{dateTimeParserService.date(expedition.delivery_date)}}</span>
      </p>
      <p>
        Transportista: <span>{{expedition.shipper}}</span>
      </p>
      <p class="blocked" *ngIf="expeditionBlocked">
        <span>La expedición escaneada está bloqueada. Escanee otra expedición.</span>
      </p>
      <p class="blocked" *ngIf="!expeditionBlocked && noPendingReceptions">
        <span *ngIf="noPendingConfirms">La expedición no tiene pedido. Escanee otra expedición.</span>
        <span *ngIf="!noPendingConfirms">La expedición tiene líneas de pedido pendiente de confirmar. Escanee otra expedición.</span>
      </p>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button [disabled]="receptionDisabled" (click)="reception(expedition)">
        RECEPCIONAR
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>

  <p *ngIf="anotherExpeditions && anotherExpeditions.length > 0 && expedition" class="title">{{titleAnotherExpeditions}}</p>
  <mat-card *ngFor="let anotherExpedition of anotherExpeditions">
    <mat-card-header>
      <mat-card-title># {{anotherExpedition.reference}}</mat-card-title>
      <mat-card-subtitle>{{anotherExpedition.provider_name}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p>
        Nº pallets: <span>{{anotherExpedition.expeditionPallets}}</span>
      </p>
      <p>
        Nº bultos: <span>{{anotherExpedition.expeditionPackings}}</span>
      </p>
      <p>
        Estados: <span>{{stringStates(anotherExpedition.expeditionStates)}}</span>
      </p>
      <p *ngIf="dateTimeParserService.date(anotherExpedition.delivery_date) != 'Invalid date'">
        Fecha de envío: <span>{{dateTimeParserService.date(anotherExpedition.delivery_date)}}</span>
      </p>
      <p>
        Transportista: <span>{{anotherExpedition.shipper}}</span>
      </p>
      <p class="blocked" *ngIf="expeditionBlocked">
        <span>La expedición escaneada está bloqueada. Escanee otra expedición.</span>
      </p>
      <p class="blocked" *ngIf="!expeditionBlocked && noPendingReceptions">
        <span *ngIf="noPendingConfirms">La expedición no tiene pedido. Escanee otra expedición.</span>
        <span *ngIf="!noPendingConfirms">La expedición tiene líneas de pedido pendiente de confirmar. Escanee otra expedición.</span>
      </p>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button [disabled]="receptionDisabled" (click)="reception(anotherExpedition)">
        RECEPCIONAR
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>
</ion-content>
