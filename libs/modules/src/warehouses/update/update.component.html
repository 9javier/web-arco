<!--View to update an user-->
<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-button (click)="close()">
                <ion-icon name="close" class="toogleArrow"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Actualizar almacén</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>
    <suite-utils></suite-utils>
    <!--Form to update the user-->
    <form [formGroup]="updateForm">
        <!--Nombre del almacen-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <i color="medium" class="material-icons">title</i>
            </div>
            <ion-input placeholder="Nombre" class="ion-margin-horizontal" formControlName="name" type="text" text></ion-input>
        </ion-item>
        <!--Descripción del almacen-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <i color="medium" class="material-icons">description</i>
            </div>
            <ion-input placeholder="Descripción" class="ion-margin-horizontal" formControlName="description" type="text" text></ion-input>
        </ion-item>
        <!--Prefijo-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <ion-icon color="medium" name="barcode"></ion-icon>
            </div>
            <ion-input style="text-transform: uppercase" (keypress)="onlyUpperLetters($event)" placeholder="Prefijo, Ej: ABCD" class="ion-margin-horizontal" formControlName="prefix_container" type="text" text></ion-input>
        </ion-item>
        <!--Referencia-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <ion-icon color="medium" name="barcode"></ion-icon>
            </div>
            <ion-input placeholder="Referencia, Ej: 001" class="ion-margin-horizontal" formControlName="reference" type="text" pattern="[0-9]*" inputmode="numeric" number></ion-input>
        </ion-item>
        <!--Group warehouse picking-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <ion-icon color="medium" name="barcode"></ion-icon>
            </div>
            <ion-select placeholder="Group warehouse picking" formControlName="groupsWarehousePicking" multiple="true">
                <ion-select-option *ngFor="let group of groupWarehousesPicking" [value]="group.id">{{group.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Tiene building-->
        <ion-item *ngIf="buildings && buildings.length">
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item no-padding>
                        <mat-checkbox formControlName="hasBuilding">posee building</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--buildings-->
        <ion-item *ngIf="updateForm.value.hasBuilding && buildings && buildings.length">
            <div slot="start" class="slot-start-icon">
                <ion-icon color="medium" name=""></ion-icon>
            </div>
            <ion-select placeholder="Building" formControlName="buildingId" okText="Ok" cancelText="Cancelar">
                <ion-select-option *ngFor="let building of buildings" [value]="building.id">{{building.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Es tienda-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item no-padding>
                        <mat-checkbox formControlName="is_store">Es tienda</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--Tiendas-->
        <ion-item *ngIf="updateForm.value.is_store && groups && groups.length">
            <div slot="start" class="slot-start-icon">
                <ion-icon color="medium" name=""></ion-icon>
            </div>
            <ion-select placeholder="Grupo" formControlName="groupId" okText="Ok" cancelText="Cancelar">
                <ion-select-option *ngFor="let group of groups" [value]="group.id">{{group.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Es outlet-->
        <ion-item *ngIf="updateForm.value.is_store">
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item no-padding>
                        <mat-checkbox formControlName="is_outlet">Es outlet</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>

        <!--Establecer como almacén principal-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item no-padding>
                        <mat-checkbox formControlName="is_main">Establecer como almacen principal</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--Tiene pasillos-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item no-padding>
                        <mat-checkbox formControlName="has_racks">Tiene almacén con mapa</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <ion-item-group *ngIf="updateForm.value.has_racks">
            <!--Pasillo-->
            <ion-item>
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons">view_module</i>
                </div>
                <ion-input placeholder="Pasillos" class="ion-margin-horizontal" formControlName="halls" type="number" number></ion-input>
            </ion-item>
            <!--Altura-->
            <ion-item *ngIf="!currentHasRacks">
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons">view_stream</i>
                </div>
                <ion-input placeholder="Alturas" class="ion-margin-horizontal" formControlName="rows" type="number" number></ion-input>
            </ion-item>
            <!--Columna-->
            <ion-item *ngIf="!currentHasRacks">
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons">view_column</i>
                </div>
                <ion-input placeholder="Columnas" class="ion-margin-horizontal" formControlName="columns" type="number" number></ion-input>
            </ion-item>
        </ion-item-group>
    </form>
</ion-content>
<ion-footer>
    <ion-toolbar>
        <ion-button slot="end" color="light" (click)="close()">Cancelar</ion-button>
        <ion-button slot="end" color="primary" [disabled]="updateForm.invalid" (click)="submit()">Guardar</ion-button>
    </ion-toolbar>
</ion-footer>