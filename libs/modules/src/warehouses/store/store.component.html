<!--View to create a new user-->
<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-button (click)="close()">
                <ion-icon name="close" class="toogleArrow"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Añadir almacén</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>
    <suite-utils></suite-utils>
    <!--Form to update the user-->
    <form [formGroup]="createForm">
        <!--Nombre del almacen-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <i class="icon" color="medium" class="material-icons">title</i>
            </div>
            <!-- Input Label -->
            <ion-label class="label large" position="stacked">Nombre</ion-label>
            <!-- Input Text -->
            <ion-input class="ion-margin-horizontal inputmode" formControlName="name" type="text" text></ion-input>
        </ion-item>
        <!--Descripción del almacen-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <i color="medium" class="material-icons">description</i>
            </div>
            <!-- Input Label -->
            <ion-label class="label large" position="stacked">Descripción</ion-label>
            <!-- Input Text -->
            <ion-input class="input" class="ion-margin-horizontal" formControlName="description" type="text" text></ion-input>
        </ion-item>
        <!--Manage agency-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Gestion de agencias</ion-label>
            <!-- Input Select -->
            <ion-select class="select" formControlName="manageAgencyId" multiple="true">
                <ion-select-option *ngFor="let agency of agencies" [value]="agency.id">{{agency.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Packing type-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Tipo de embalaje</ion-label>
            <!-- Input Select -->
            <ion-select class="select" formControlName="TypePackingId">
                <ion-select-option *ngFor="let packingType of packingTypes" [value]="packingType.id">{{packingType.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Prefijo-->
        <ion-item>
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Prefijo, Ej: ABCD</ion-label>
            <!-- Input Text -->
            <ion-input style="text-transform: uppercase" (keypress)="onlyUpperLetters($event)" class="ion-margin-horizontal input" formControlName="prefix_container" type="text" text></ion-input>
        </ion-item>
        <!--MthresholdShippingStore-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label item" position="stacked">Máximo de envíos</ion-label>
            <!-- Input Text -->
            <ion-input style="text-transform: uppercase" (keypress)="onlyNumbers($event)" class="ion-margin-horizontal input" formControlName="thresholdShippingStore" type="text" text></ion-input>
        </ion-item>
        <!--Referencia-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
            <ion-label class="label large" position="stacked">Referencia, Ej: 001</ion-label>
            <!-- Input Text -->
            <ion-input  class="ion-margin-horizontal input" formControlName="reference" type="text" pattern="[0-9]*" inputmode="numeric" number></ion-input>
        </ion-item>
        <!--Group warehouse picking-->
        <ion-item lines="none"class="item">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name="barcode"></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Grupos de almacenes para picking</ion-label>
            <!-- Input Select -->
            <ion-select class="select" formControlName="groupsWarehousePicking" multiple="true">
                <ion-select-option *ngFor="let group of groupWarehousesPicking" [value]="group.id">{{group.name}}</ion-select-option>
            </ion-select>
        </ion-item>

        <!--Tiene building-->
        <ion-item lines="none"*ngIf="buildings && buildings.length">
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item lines="none"no-padding>
                        <mat-checkbox formControlName="hasBuilding">Gestion de almacén</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--buildings-->
        <ion-item lines="none"*ngIf="createForm.value.hasBuilding && buildings && buildings.length">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name=""></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Edificio</ion-label>
            <!-- Input Text -->
            <ion-select class="select" formControlName="buildingId" okText="Ok" cancelText="Cancelar">
                <ion-select-option *ngFor="let building of buildings" [value]="building.id">{{building.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Es tienda-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item lines="none"no-padding>
                        <mat-checkbox formControlName="is_store">Es tienda</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--Tiendas-->
        <ion-item class="item" lines="none"*ngIf="createForm.value.is_store && groups && groups.length">
            <div slot="start" class="slot-start-icon">
                <ion-icon class="icon" color="medium" name=""></ion-icon>
            </div>
            <!-- Input Label -->
                <ion-label class="label large" position="stacked">Grupo</ion-label>
            <!-- Input Select -->
            <ion-select class="select" formControlName="groupId" okText="Ok" cancelText="Cancelar">
                <ion-select-option *ngFor="let group of groups" [value]="group.id">{{group.name}}</ion-select-option>
            </ion-select>
        </ion-item>
        <!--Es outlet-->
        <ion-item lines="none"*ngIf="createForm.value.is_store">
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item lines="none"no-padding>
                        <mat-checkbox formControlName="is_outlet">Es outlet</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>


        <!--Establecer como almacén principal-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item lines="none"no-padding>
                        <mat-checkbox formControlName="is_main">Establecer como almacén principal</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <!--Tiene pasillos-->
        <ion-item>
            <ion-label lines="none" no-padding>
                <div inset lines="none">
                    <ion-item lines="none"no-padding>
                        <mat-checkbox formControlName="has_racks">Tiene almacén con mapa</mat-checkbox>
                    </ion-item>
                </div>
            </ion-label>
        </ion-item>
        <ion-item-group *ngIf="createForm.value.has_racks">
            <!--Pasillo-->
            <ion-item class="item" lines="none">
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons icon">view_module</i>
                </div>
                <!-- Input Label -->
                    <ion-label class="label large" position="stacked">Pasillos</ion-label>
                <!-- Input Input -->
                <ion-input class="ion-margin-horizontal input" formControlName="halls" type="number" number></ion-input>
            </ion-item>
            <!--Altura-->
            <ion-item class="item" lines="none">
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons icon">view_stream</i>
                </div>
                <!-- Input Label -->
                    <ion-label class="label large" position="stacked">Alturas</ion-label>
                <!-- Input Input -->
                <ion-input  class="ion-margin-horizontal input" formControlName="rows" type="number" number></ion-input>
            </ion-item>
            <!--Columna-->
            <ion-item  class="item" lines="none">
                <div slot="start" class="slot-start-icon">
                    <i class="material-icons icon">view_column</i>
                </div>
                <!-- Input Label -->
                    <ion-label class="label large"  position="stacked">Columnas</ion-label>
                <!-- Input Input -->
                <ion-input class="ion-margin-horizontal input" formControlName="columns" type="number" number></ion-input>
            </ion-item>
        </ion-item-group>
    </form>
</ion-content>
<ion-footer>
    <ion-toolbar>
        <ion-button slot="end" color="light" (click)="close()">Cancelar</ion-button>
        <ion-button slot="end" color="primary" [disabled]="createForm.invalid" (click)="submit()">Guardar</ion-button>
    </ion-toolbar>
</ion-footer>
