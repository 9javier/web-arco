<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-button (click)="close()">
                <ion-icon name="close" class="toogleArrow"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>{{title}}</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content padding="true">
    <form [formGroup]="form">
        <ion-item lines="none">
            <label class="title-select">Marca:     </label>
            <mat-select (selectionChange)="selectBrand($event)" formControlName="brand" [disabled]="update">
              <mat-option *ngFor="let brand of brands" [value]="brand.id">
                <div>
                  {{ brand.name }}
                </div> 
              </mat-option>
            </mat-select>
        </ion-item>
                
        <ion-item lines="none">
            <label class="title-select">Modelo:    </label>
            <mat-select (selectionChange)="selectSubBrand($event)" formControlName="subbrand" [disabled]="update">
              <mat-option *ngFor="let subbrand of subbrands" [value]="subbrand.id">
                <div>
                  {{ subbrand.reference }} - {{subbrand.name}}
                </div> 
              </mat-option>
            </mat-select>
        </ion-item>
    </form>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Grupo de tallas
          </mat-panel-title>
        </mat-expansion-panel-header>
            <mat-table [dataSource]="groups">
            <mat-row *matRowDef="let row; columns: displayedColumns;" ></mat-row>
            
                <ng-container matColumnDef='group'>
                    <mat-header-cell class="header-hidden" *matHeaderCellDef>
                                    
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element" [ngClass]="element.recommended == true ? 'size-recomended' : ''">
                        {{ element.name ?  element.name : element.sizes.name }}
                      </mat-cell>
                </ng-container>

                <ng-container matColumnDef='actions' *ngIf="!update">
                  <mat-header-cell class="header-hidden" *matHeaderCellDef>
                      
                  </mat-header-cell>
                  <mat-cell *matCellDef="let row">
                      <div class="actions">
                        <mat-icon class="button-info" (click)="info(row)">info</mat-icon>
                      </div>
                      <div>
                        <mat-checkbox  (click)="$event.stopPropagation();"  color="primary"
                      (change)="checkboxRow($event,row)" [checked]="selection.isSelected(row)"
                      ></mat-checkbox>
                      </div>
                    </mat-cell>
              </ng-container>

                <ng-container matColumnDef='actions' *ngIf="update">
                    <mat-header-cell class="header-hidden" *matHeaderCellDef>
                        
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <div class="actions">
                          <mat-icon class="button-info" (click)="info(element)">info</mat-icon>
                        </div>
                        <div>
                          <mat-checkbox  (click)="$event.stopPropagation();" color="primary"
                        (change)="checkboxRow($event,element)" [checked]="element.check == true"
                        ></mat-checkbox>
                        </div>
                      </mat-cell>
                </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
            </mat-table>
      </mat-expansion-panel>
      
</ion-content>
<ion-footer>
    <ion-toolbar>
        <ion-button slot="end" color="light" (click)="close()">Cancelar</ion-button>
        <ion-button *ngIf="!update" slot="end" color="primary" (click)="submit($event)" [disabled]="selection.selected.length <= 0" >Guardar</ion-button>
        <ion-button *ngIf="update" slot="end" color="primary" (click)="submit($event)" >Guardar</ion-button>
      </ion-toolbar>
</ion-footer>
