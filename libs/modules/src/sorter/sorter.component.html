<ion-content padding="true">
  <ion-grid>
      <ion-text color="primary">
          <suite-breadcrumb [post]="'Plantillas'"></suite-breadcrumb>
        </ion-text>
        
        <div class="main-buttons">
          <h1>
            <ion-button class="btn-move-products" slot="end" color="primary">
              CREAR / ELIMINAR PLANTILLA
            </ion-button>
          </h1>
        </div>
        <div class="container">
          <mat-table #table [dataSource]="dataSource">
            <ng-container matColumnDef="icon">
              <mat-header-cell *matHeaderCellDef></mat-header-cell>
              <mat-cell *matCellDef="let row" class="row-icon-location">
                <ion-grid>
                  <ion-row>
                    <ion-col>
                      <div class="cell-resume-use"></div>
                    </ion-col>
                    <ion-col>
                      <div class="cell-resume-incidence" [class.cell-incidence-serious]="row.incidence == 'serious'"
                        [class.cell-incidence-slight]="row.incidence == 'slight'"></div>
                      <div class="cell-resume-free" [class.cell-not-free]="row.freeLocations <= 0"></div>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </mat-cell>
            </ng-container>
        
            <ng-container matColumnDef="Ntemplate">
              <mat-header-cell *matHeaderCellDef> Plantilla </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.Ntemplate}} </mat-cell>
            </ng-container>
        
            <ng-container matColumnDef="zona">
              <mat-header-cell *matHeaderCellDef>N Zona </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.zona}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="dropdown">
              <mat-header-cell *matHeaderCellDef></mat-header-cell>
              <mat-cell *matCellDef="let element">
                <span>
                  <ion-icon slot="end" name="ios-arrow-down" *ngIf="!element.dropdown"></ion-icon>
                  <ion-icon slot="end" name="ios-arrow-up" *ngIf="element.dropdown"></ion-icon>
                </span>
              </mat-cell>
            </ng-container>
        
            <!-- Expanded Content Column - The detail row is made up of this one column -->
            <ng-container matColumnDef="expandedDetail">
              <mat-cell *matCellDef="let detail"> 
                <table mat-table [dataSource]="warehouses">
                  <ng-container matColumnDef="check" [formGroup]="selectedForm">
                    <th mat-header-cell *matHeaderCellDef>
                      <ion-checkbox
                        formControlName="selector" (ionChange)="selectAll($event)">
                      </ion-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                      <ng-template [ngIf]="selectedForm['controls']?.selects">
                        <ion-checkbox [formControl]="selectedForm['controls']?.selects['controls'][i]"></ion-checkbox>
                      </ng-template>
                    </td>
                  </ng-container>
                
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="displayedColumnsWareHouse"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsWareHouse;"></tr>
                </table>
              </mat-cell>
            </ng-container>
        
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"
                    matRipple 
                    class="element-row" 
                    [class.expanded]="expandedElement == row"
                    (click)="clickShowExpasion(row)"></mat-row>
            <mat-row *matRowDef="let row; columns: ['expandedDetail']; when: isExpansionDetailRow"
                    [@detailExpand]="row.element == expandedElement && showExpasion ? 'expanded' : 'collapsed'"
                    style="overflow: hidden"> 
            </mat-row>
          </mat-table>
        </div>
  </ion-grid>
</ion-content>


