<ion-content padding="true">

  <ion-grid>
    <ion-text color="primary">
      <suite-breadcrumb [post]="postRoute"></suite-breadcrumb>
    </ion-text>

    <div class="main-buttons">
      <h1 style="float: left">Zonas</h1>
      <h2 style="float: right">
        <ion-button class="btn-move-products" slot="end" color="primary" (click)="addCarriles()">
          GUARDAR CARRILES
        </ion-button>
      </h2>
    </div>

    <div class="container" *ngIf="zones">
      <mat-table #table [dataSource]="zones">
        <ng-container matColumnDef="delete" [formGroup]="selectedForm">
          <mat-header-cell *matHeaderCellDef>

            <ion-checkbox (ionChange)="selectAll($event)"></ion-checkbox>
            <i class="material-icons">delete</i>
          </mat-header-cell>

          <mat-cell *matCellDef="let element; let i = index">
            <ng-template [ngIf]="selectedForm['controls']?.toSelect">
              <ion-checkbox (click)="toDeleteZone(i)" [formControl]="selectedForm['controls']?.toSelect['controls'][i]">
              </ion-checkbox>
            </ng-template>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="Ntemplate">
          <mat-header-cell *matHeaderCellDef> Identificaci√≥n </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.zoneNumber}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="nombre">
          <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
        </ng-container>
        <!--<ng-container matColumnDef="active" [formGroup]="selectedFormActive">
          <mat-header-cell *matHeaderCellDef>
            <ion-checkbox (ionChange)="selectAllActive($event)"></ion-checkbox>
            <p>Active</p>
          </mat-header-cell>
          <mat-cell *matCellDef="let element; let i = index">
            <ng-template [ngIf]="selectedFormActive['controls']?.toSelectActive">
              <ion-checkbox (click)="active()"
                [formControl]="selectedFormActive['controls']?.toSelectActive['controls'][i]"></ion-checkbox>
            </ng-template>
          </mat-cell>
        </ng-container>-->
        <!-- <ng-container matColumnDef="configurarCarriles">
          <mat-header-cell *matHeaderCellDef>Configurar Carriles</mat-header-cell>
          <mat-cell *matCellDef="let element">
            <span>
              <i (click)="openRailsConfiguration()" class="material-icons">build</i>
            </span>
          </mat-cell>
        </ng-container> -->
        <ng-container matColumnDef="warehoures">
          <mat-header-cell *matHeaderCellDef>Warehouses</mat-header-cell>
          <mat-cell *matCellDef="let element">
            <span>
              <i (click)="openWarehousesModal(element.id)" class="material-icons">store_mall_directory</i>
            </span>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="color">
          <mat-header-cell *matHeaderCellDef> Color </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.color.name}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="quantity">
          <mat-header-cell *matHeaderCellDef> Cantidad </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.quantity}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="updateCarriles">
          <mat-header-cell *matHeaderCellDef> Actualizar Carriles</mat-header-cell>
          <mat-cell *matCellDef="let element">
            <mat-radio-group name="rails">
              <mat-radio-button (click)="displayRailsRadio(element);  matrixSelectWay.changeZone(element)"
                [value]="element"></mat-radio-button>
            </mat-radio-group>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;" matRipple class="element-row"
          [class.expanded]="expandedElement == row" (click)="update(row)"></mat-row>
        <mat-row *matRowDef="let row; when: isExpansionDetailRow"
          [@detailExpand]="row.element == expandedElement && showExpasion ? 'expanded' : 'collapsed'"
          style="overflow: hidden">
        </mat-row>
      </mat-table>
    </div>

    <ion-row *ngIf="waysMatrix.length > 0">
      <ion-col size="6">
        <div class="containerWays" >
          <suite-matrix-select-way-sorter [waysMatrix]="waysMatrix"></suite-matrix-select-way-sorter>
        </div>
      </ion-col>
      <ion-col size="6">
        <ion-row *ngIf="waysMatrix.length > 0">
          <ion-col size="6">
            <div class="containerTable">
              <mat-table #table [dataSource]="dataSource2" class="prioridad">
                <ng-container matColumnDef="prioridad" >
                  <mat-header-cell *matHeaderCellDef>
                    Prioridad
                  </mat-header-cell>
        
                  <mat-cell *matCellDef="let element">
                    <p style="margin-left: 20px">{{element.position}}</p> 
                  </mat-cell>
                </ng-container>
      
                <ng-container matColumnDef="calle">
                  <mat-header-cell *matHeaderCellDef> Calle </mat-header-cell>
                  <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                </ng-container>
      
        
                <mat-header-row *matHeaderRowDef="displayedData"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedData;" matRipple class="element-row"
                  [class.expanded]="expandedElement == row"></mat-row>
                <mat-row *matRowDef="let row; when: isExpansionDetailRow"
                  [@detailExpand]="row.element == expandedElement && showExpasion ? 'expanded' : 'collapsed'"
                  style="overflow: hidden">
                </mat-row>
              </mat-table>
            </div>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>

  </ion-grid>
  <ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button *ngIf="selectedForm.valid && selectedForm['controls']?.toSelect" color="danger" (click)="delete()">
      <ion-icon name="trash"></ion-icon>
    </ion-fab-button>
    <br>
    <ion-fab-button (click)="store()">
      <ion-icon name="save"></ion-icon>
    </ion-fab-button>
    <ion-fab-button (click)="store()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>