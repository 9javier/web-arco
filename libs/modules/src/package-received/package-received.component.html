
<form *ngIf="showFiltersMobileVersion" [formGroup]="form">
  <ion-grid>
    <ion-row>
      <ion-col size="6">
        <ion-label>Fecha:</ion-label>
        <suite-tags-input placeholder="Referencia" [options]="date" formControlName="date"
          multiple="true"></suite-tags-input>
      </ion-col>
      <ion-col size="6">
        <ion-label>Origen:</ion-label>
        <suite-tags-input placeholder="Marca" [options]="origin" formControlName="origin" multiple="true">
        </suite-tags-input>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6">
        <ion-label>Pedido:</ion-label>
        <suite-tags-input placeholder="Referencia" [options]="deliveryRequest" formControlName="deliveryRequestId"
          multiple="true"></suite-tags-input>
      </ion-col>
      <ion-col size="6">
        <ion-label>Bulto:</ion-label>
        <suite-tags-input placeholder="Marca" [options]="uniqueCode" formControlName="uniqueCode" multiple="true">
        </suite-tags-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="btn-remove" size="6">
        <ion-button (click)="clearFilters()">
          Borra Filtros
        </ion-button>
      </ion-col>
      <ion-col class="btn-apply" size="6">
        <ion-button (click)="applyFilters()">
          Aplicar Filtros
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</form>




<ion-content>
  <suite-responsive-layout>
    <div portrait class="portrait-section" [ngStyle]="{height: mobileVersionTypeList == 'table' ? '100vh' : 'auto'}">
      <!-- <div *ngIf="mobileVersionTypeList == 'table'">
        <div class="filters-mobile">
          <span>Filtros aquí</span>
        </div>
        <div class="container-table-mobile">
          <table mat-table [dataSource]="dataSource">
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

            <ng-container matColumnDef="select" [formGroup]="selectedForm" sticky>
              <th mat-header-cell *matHeaderCellDef>
                <ion-checkbox *ngIf="status != 3" formControlName="selector" (ionChange)="selectAll($event)">
                </ion-checkbox>
              </th>
              <td mat-cell *matCellDef="let label;let i = index" (click)="prevent($event)">
                <ng-template [ngIf]="selectedForm['controls']?.toSelect">
                  <ion-checkbox (click)="itemSelected(label.id)" *ngIf="label.status != 3"
                                [formControl]="selectedForm['controls']?.toSelect['controls'][i]"></ion-checkbox>
                </ng-template>
              </td>
            </ng-container>

            <ng-container matColumnDef="model">
              <th mat-header-cell *matHeaderCellDef>
                Código de artículo
              </th>
              <td mat-cell *matCellDef="let price">
                {{ price.model.reference }}
              </td>
            </ng-container>

            <ng-container matColumnDef="range">
              <th mat-header-cell *matHeaderCellDef>
                Rango de talla
              </th>
              <td mat-cell *matCellDef="let price">
                {{ processProductSizesRange(price) }}
              </td>
            </ng-container>

            <ng-container matColumnDef="family">
              <th mat-header-cell *matHeaderCellDef>
                familia
              </th>
              <td mat-cell *matCellDef="let price">

              </td>
            </ng-container>

            <ng-container matColumnDef="lifestyle">
              <th mat-header-cell *matHeaderCellDef>
                lifestyle
              </th>
              <td mat-cell *matCellDef="let price">

              </td>
            </ng-container>

            <ng-container matColumnDef="brand">
              <th mat-header-cell *matHeaderCellDef>
                marca
              </th>
              <td mat-cell *matCellDef="let price">
                {{ price?.model?.brand?.name }}
              </td>
            </ng-container>

            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef>
                Precio tarifa
              </th>
              <td mat-cell *matCellDef="let price">
                {{ getFinalPrice(price) }}€
              </td>
            </ng-container>

          </table>
        </div>
      </div> -->

      <div *ngIf="mobileVersionTypeList == 'list'">
        <div class="list-items-mobile">
          <mat-accordion multi="false" *ngFor="let package of packages; let i = index">
            <div class="checkbox">
                <ion-checkbox [formControl]="checkForm['controls']?.toSelect['controls'][i]['controls']?.selected">
                </ion-checkbox>
            </div>
            <mat-expansion-panel *ngIf=" package.orderPackage.productsQuantity != 0">
              <mat-expansion-panel-header class="custom-panel-header">
                <ion-grid>
                  <ion-row class="custom-panel-header">
                    <ion-col size="11" class="content-prices-header">
                      <mat-panel-title>
                        <ion-row class="row-title-prices">
                          <ion-col class="product" size="9">
                            Bulto: {{package?.uniqueCode}}
                          </ion-col>
                          <ion-col class="product" size="3">
                            Cant: {{package?.orderPackage?.productsQuantity}}
                          </ion-col>
                        </ion-row>
                      </mat-panel-title>
                      <mat-panel-description class="panel-description">
                        <ion-row class="row-family-lifestyle-size">
                          <ion-col class="family-lifestyle" size="8">
                            <p>
                              Pedido: {{package?.orderPackage?.order?.deliveryRequestExternalId}}
                            </p>
                          </ion-col>
                          <ion-col class="family-lifestyle" size="4">
                            <p>
                              {{formattedDate(package?.orderPackage?.updatedAt)}}
                            </p>
                          </ion-col>
                        </ion-row>
                      </mat-panel-description>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </mat-expansion-panel-header>
              <div class="my-expansion-panel-body">
                <ion-list *ngFor="let product of package.orderPackage.products">
                  <div style="border: black 1px solid; padding: 10px;">
                    <ion-row class="list-products">
                      <ion-col>
                      <p>Modelo: {{product?.model.name}}</p>
                      </ion-col>
                    </ion-row>
                    <ion-row class="list-products">
                      <ion-col>
                      <p>Artículo: {{product?.model.reference}}</p>
                      </ion-col>
                      <ion-col>
                      <p>Talla: {{product?.size.number}}</p>
                      </ion-col>
                    </ion-row>
                  </div>
                </ion-list>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
    </div>

    <!-- <div landscape>
      <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
      </ion-text>
      <form [formGroup]="form">
        <ion-grid>
          <ion-row>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Referencia:</ion-label>
              <suite-tags-input placeholder="Referencia" [options]="models" formControlName="models" multiple="true">
              </suite-tags-input>
            </ion-col>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Marca:</ion-label>
              <suite-tags-input placeholder="Marca" [options]="brands" formControlName="brands" multiple="true">
              </suite-tags-input>
            </ion-col>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Temporada:</ion-label>
              <suite-tags-input placeholder="Temporada" [options]="seasons" formControlName="seasons" multiple="true">
              </suite-tags-input>
            </ion-col>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Color:</ion-label>
              <suite-tags-input placeholder="Color" [options]="colors" formControlName="colors" multiple="true">
              </suite-tags-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Familia:</ion-label>
              <suite-tags-input placeholder="Familia" [options]="families" formControlName="families" multiple="true">
              </suite-tags-input>
            </ion-col>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Lifestyle:</ion-label>
              <suite-tags-input placeholder="Lifestyle" [options]="lifestyles" formControlName="lifestyles"
                multiple="true"></suite-tags-input>
            </ion-col>
            <ion-col size="2" size-xs="6" size-md="3">
              <ion-label>Ordenar:</ion-label>
              <ion-item formGroupName="orderby">
                <ion-select formControlName="type" interface="popover">
                  <ion-select-option value="{{group.id}}" *ngFor="let group of groups">{{group.name}}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>

          </ion-row>
        </ion-grid>
      </form> -->

      <!-- <table mat-table [dataSource]="dataSource">

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <ng-container matColumnDef="select" [formGroup]="selectedForm">
          <th mat-header-cell *matHeaderCellDef>
            <ion-checkbox *ngIf="status != 3" formControlName="selector" (ionChange)="selectAll($event)">
            </ion-checkbox>
          </th>
          <td mat-cell *matCellDef="let label;let i = index" (click)="prevent($event)">
            <ng-template [ngIf]="selectedForm['controls']?.toSelect">
                            <ion-checkbox (click)="itemSelected(label.id)"
                                          [formControl]="selectedForm['controls']?.toSelect['controls'][i]"></ion-checkbox>
            </ng-template>
          </td>
        </ng-container>

        <ng-container matColumnDef="model">
          <th mat-header-cell *matHeaderCellDef>
            Código artículo
          </th>
          <td mat-cell *matCellDef="let price">
            {{ price?.model?.reference }}
          </td>
        </ng-container>

        <ng-container matColumnDef="range">
          <th mat-header-cell *matHeaderCellDef>
            Rango de talla
          </th>
          <td mat-cell *matCellDef="let price">
            {{ processProductSizesRange(price) }}
          </td>
        </ng-container>

        <ng-container matColumnDef="family">
          <th mat-header-cell *matHeaderCellDef>
            familia
          </th>
          <td mat-cell *matCellDef="let price">
            {{ price.model.family ? price.model.family.name : '' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="lifestyle">
          <th mat-header-cell *matHeaderCellDef>
            lifestyle
          </th>
          <td mat-cell *matCellDef="let price">
            {{ price.model.lifestyle ? price.model.lifestyle.name : '' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="brand">
          <th mat-header-cell *matHeaderCellDef>
            marca
          </th>
          <td mat-cell *matCellDef="let price">
            {{ price?.model?.brand?.name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>
            Precio tarifa
          </th>
          <td mat-cell *matCellDef="let price">
            {{ getFinalPrice(price) }}€
          </td>
        </ng-container>

      </table>
    </div> -->
  </suite-responsive-layout>
  <!-- <suite-paginator [pagerValues]="pagerValues"></suite-paginator> -->

</ion-content>
<ion-footer class="footer-products">
  <ion-toolbar>
    <suite-paginator [pagerValues]="pagerValues"></suite-paginator>
  </ion-toolbar>
  <ion-fab vertical="bottom" horizontal="end"  class="horizontal-fab">
    <ion-fab-button matTooltip="Actualizar" matTooltipClass="tooltip" (click)="refresh()"><i
      class="material-icons">refresh</i></ion-fab-button>
    <ion-fab-button (click)="printPrices(prices, null)" *ngIf="selectedForm['controls']?.toSelect && selectedForm.valid">
      <ion-icon name="print"></ion-icon>
    </ion-fab-button>
    <ion-fab-button (click)="process()" *ngIf="hasToProcess()">
      <ion-icon name="checkmark-circle"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-footer>
