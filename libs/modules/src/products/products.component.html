<ion-content>
    <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
    </ion-text>
    <form [formGroup]="form">
        <ion-grid>
            <ion-row>

                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Referencia
                        </ion-label>
                        <ion-input formControlName="productReferencePattern"></ion-input>
                    </ion-item>
                </ion-col>
                <!--<ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Modelo
                        </ion-label>
                        <ion-select formControlName="models" [multiple]="true">
                            <ion-select-option value="{{model.id}}" *ngFor="let model of models">{{model.reference}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-col>-->
                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Colores
                        </ion-label>
                        <ion-select formControlName="colors" [multiple]="true">
                            <ion-select-option value="{{color.id}}" *ngFor="let color of colors">{{color.name}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-col>
                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Tallas
                        </ion-label>
                        <ion-select formControlName="sizes" [multiple]="true">
                            <ion-select-option value="{{size.id}}" *ngFor="let size of sizes">{{size.name}}</ion-select-option>
                        </ion-select>
                    </ion-item>

                </ion-col>
                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Almacenes
                        </ion-label>
                        <ion-select formControlName="warehouses" [multiple]="true">
                            <ion-select-option value="{{warehouse.id}}" *ngFor="let warehouse of warehouses">
                                {{warehouse.reference}} - {{warehouse.name}}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-col>
                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item>
                        <ion-label>
                            Ubicaciones
                        </ion-label>
                        <ion-select formControlName="containers" [multiple]="true">
                            <ion-select-option value="{{container.id}}" *ngFor="let container of containers">{{container.reference}}</ion-select-option>
                        </ion-select>
                    </ion-item>

                </ion-col>
                <ion-col size="2" size-xs="12" size-md="4">
                    <ion-item formGroupName="orderby">
                        <ion-label>
                            Ordenar
                        </ion-label>
                        <ion-select formControlName="type" interface="popover">
                            <ion-select-option value="{{group.id}}" *ngFor="let group of groups">{{group.name}}</ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-col>

            </ion-row>
        </ion-grid>
    </form>
    <table mat-table [dataSource]="dataSource">

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

        <tr mat-row (click)="goDetails(row)" *matRowDef="let row; columns: displayedColumns"></tr>

        <ng-container matColumnDef="reference">
            <th mat-header-cell *matHeaderCellDef>Referencia</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.productShoeUnit?.reference }}
            </td>
        </ng-container>

        <ng-container matColumnDef="model">
            <th mat-header-cell *matHeaderCellDef>Modelo</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.productShoeUnit?.model?.reference }}
            </td>
        </ng-container>

        <ng-container matColumnDef="color">
            <th mat-header-cell *matHeaderCellDef>Color</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.productShoeUnit?.model?.color?.name }}
            </td>
        </ng-container>

        <ng-container matColumnDef="size">
            <th mat-header-cell *matHeaderCellDef>Talla</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.productShoeUnit?.size?.name }}
            </td>
        </ng-container>

        <ng-container matColumnDef="warehouse">
            <th mat-header-cell *matHeaderCellDef>Almacén</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.warehouse?.reference }}
            </td>
        </ng-container>

        <ng-container matColumnDef="container">
            <th mat-header-cell *matHeaderCellDef>Ubicación</th>
            <td mat-cell *matCellDef="let product">
                {{ product?.container?.reference }}
            </td>
        </ng-container>
        <ng-container matColumnDef="select" [formGroup]="selectedForm">
            <th mat-header-cell *matHeaderCellDef>
                <ion-checkbox (ionChange)="selectAll($event)"></ion-checkbox>
            </th>
            <td mat-cell *matCellDef="let product;let i = index" (click)="prevent($event)">
                <ng-template [ngIf]="selectedForm['controls']?.toSelect">
                    <ion-checkbox [formControl]="selectedForm['controls']?.toSelect['controls'][i]"></ion-checkbox>
                </ng-template>
            </td>
        </ng-container>


    </table>
    <mat-paginator [pageSizeOptions]="pagerValues"></mat-paginator>

</ion-content>
<ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button (click)="printProducts()" *ngIf="selectedForm['controls']?.toSelect && selectedForm.valid">
        <ion-icon name="print"></ion-icon>
    </ion-fab-button>
</ion-fab>
