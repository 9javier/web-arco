<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-button matTooltip="Cerrar" matTooltipClass="tooltip" (click)="close()">
                <ion-icon name="close" class="toogleArrow"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>{{ product?.productShoeUnit?.reference }}</ion-title>
        <ion-buttons slot="end">
            <ion-button matTooltip="Imprimir etiqueta" matTooltipClass="tooltip" (click)="printProductTag()">
                <ion-icon name="print" class="toogleArrow"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content>
    <ion-segment [(ngModel)]="section">
        <ion-segment-button value="information">
            <ion-label>Información</ion-label>
        </ion-segment-button>
        <ion-segment-button value="historical">
            <ion-label>Histórico</ion-label>
        </ion-segment-button>
    </ion-segment>
    <!--Information section-->
    <div *ngIf="section == 'information'">
        <ion-list>
          <ion-item *ngIf="product.productShoeUnit.noOnline">
            <ion-label>
               <h2 id="online">No Apto Online</h2>
            </ion-label>
          </ion-item>
            <ion-item>
                <ion-label>
                    Referencia: {{product.productShoeUnit?.model?.reference}}
                </ion-label>
            </ion-item>
            <ion-item>
                <ion-label>
                    Marca: {{product.productShoeUnit?.model?.brand?.name}}
                </ion-label>
            </ion-item>
            <ion-item>
                <ion-label>
                    Talla: {{product.productShoeUnit?.size?.number}}
                </ion-label>
            </ion-item>
            <ion-item>
                <ion-label>
                    Almacén:
                    {{product?.warehouse ? (product?.warehouse.reference + " - " + product?.warehouse.name) : ""}}
                </ion-label>
            </ion-item>
            <ion-item>
                <ion-label *ngIf="product?.status != 19">
                    Ubicación:
                    {{ product?.container?.reference ? product?.container?.reference : product?.carrier?.reference ? product?.carrier?.reference : product.locationType == 3 ? 'Sorter': ''}}
                </ion-label>
                <ion-label *ngIf="product?.status == 19">
                  Asociado a pedido: {{product?.deliveryRequestExternalId}}
                </ion-label>
            </ion-item>
            <div padding *ngIf="isProductRelocationEnabled">
                <ion-label class="title-section">Reubicar</ion-label>
                <div class="form-fields">
                    <ion-row>
                        <ion-col>
                            <ion-item lines="none">
                                <div slot="start" class="icon-field">
                                    <ion-icon name="home"></ion-icon>
                                </div>
                                <ion-label position="floating">Almacén</ion-label>
                                <div class="field">
                                    <ion-select class="ion-margin-horizontal" placeholder="Almacén" interface="popover"
                                        [(ngModel)]="warehouseSelected" (ngModelChange)="changeSelect(1)">
                                        <ion-select-option *ngFor="let warehouse of listWarehouses"
                                            [value]="warehouse.id">{{warehouse.reference}} {{warehouse.value}}</ion-select-option>
                                    </ion-select>
                                </div>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            <ion-item lines="none">
                                <div slot="start" class="icon-field">
                                    <i class="material-icons">view_module</i>
                                </div>
                                <ion-label position="floating">Pasillo</ion-label>
                                <div class="field">
                                    <ion-select class="ion-margin-horizontal" placeholder="Pasillo" interface="popover"
                                        [(ngModel)]="hallSelected" *ngIf="checkFieldIsEnabled(2)"
                                        (ngModelChange)="changeSelect(2)">
                                        <ion-select-option *ngFor="let hall of listHalls" [value]="hall.id">
                                            {{hall.value}}</ion-select-option>
                                    </ion-select>
                                </div>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            <ion-item lines="none">
                                <div slot="start" class="icon-field">
                                    <i class="material-icons">view_stream</i>
                                </div>
                                <ion-label position="floating">Fila</ion-label>
                                <div class="field">
                                    <ion-select class="ion-margin-horizontal" placeholder="Fila" interface="popover"
                                        [(ngModel)]="rowSelected" *ngIf="checkFieldIsEnabled(3)"
                                        (ngModelChange)="changeSelect(3)">
                                        <ion-select-option *ngFor="let row of listRows" [value]="row.row">{{row.row}}
                                        </ion-select-option>
                                    </ion-select>
                                </div>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            <ion-item lines="none">
                                <div slot="start" class="icon-field">
                                    <i class="material-icons">view_column</i>
                                </div>
                                <ion-label position="floating">Columna</ion-label>
                                <div class="field">
                                    <ion-select class="ion-margin-horizontal" placeholder="Columna" interface="popover"
                                        [(ngModel)]="columnSelected" *ngIf="checkFieldIsEnabled(4)"
                                        (ngModelChange)="changeSelect(4)">
                                        <ion-select-option *ngFor="let column of listColumns" [value]="column.column">
                                            {{column.column}}</ion-select-option>
                                    </ion-select>
                                </div>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                </div>
                <div class="btn-move-product">
                    <ion-row>
                        <ion-col size="6" class="btn-close">
                            <ion-button color="secondary" (click)="resetDataMovement()">
                                Cancelar
                            </ion-button>
                        </ion-col>
                        <ion-col size="6" class="btn-save">
                            <ion-button color="tertiary" (click)="saveDataMovement(product)">
                                Guardar
                            </ion-button>
                        </ion-col>
                    </ion-row>
                </div>
            </div>
        </ion-list>
    </div>
    <!--Historical section-->
    <div *ngIf="section == 'historical'">
        <ion-list>
            <ion-item *ngFor="let historical of productHistorical; let i = index">
                <div>
                    <p>
                        Almacén {{ historical.destinationWarehouse?.reference }} -
                        {{ historical.destinationWarehouse?.name }}
                    </p>
                    <p *ngIf="historical.typeAction != 27">
                        Ubicación:
                        {{ historical.locationType == 3 ? 'Sorter' : historical.destinationPacking ? historical.destinationPacking.reference : historical.destinationContainer ? historical.destinationContainer.reference: (historical.destinationCarrier ? historical.destinationCarrier.reference: historical.destinationPallet?.reference) }}
                    </p>
                    <p *ngIf="historical.typeAction == 27">
                        Pedido: {{historical?.deliveryRequestExternalId}}
                    </p>
                    <p>
                        Fecha: {{dates[i]}} {{hours[i]}}
                    </p>
                    <p>
                        Acción realizada: {{actionTypes[historical.typeAction]}}
                    </p>
                </div>
            </ion-item>
        </ion-list>
    </div>
</ion-content>
<ion-footer>
</ion-footer>
