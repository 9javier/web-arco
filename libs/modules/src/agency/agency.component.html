<ion-content padding="true">
    <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
    </ion-text>
    <ion-grid>
        <ion-row>
            <ion-col size="12">
                <div class="mat-table-wrapper-overflow-x">
                    <table mat-table [dataSource]="dataSource">

                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

                        <tr mat-row (click)="update(row)" *matRowDef="let row; columns: displayedColumns"></tr>

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef>Nombre</th>
                            <td mat-cell *matCellDef="let agency">
                                {{ agency.name }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="address">
                            <th mat-header-cell *matHeaderCellDef>Dirección</th>
                            <td mat-cell *matCellDef="let agency">
                                {{ agency.address }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef>Teléfono</th>
                            <td mat-cell *matCellDef="let agency">
                                {{ agency.phone }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="select" [formGroup]="selectForm">
                            <th mat-header-cell *matHeaderCellDef>
                                <ion-checkbox (ionChange)="selectAll($event)"></ion-checkbox>
                            </th>
                            <td mat-cell *matCellDef="let agencies;let i = index" (click)="prevent($event)">
                                <ng-template [ngIf]="selectForm['controls']?.selecteds">
                                    <ion-checkbox [formControl]="selectForm['controls']?.selecteds['controls'][i]['controls']?.selected"></ion-checkbox>
                                </ng-template>
                            </td>
                        </ng-container>
                    </table>
                </div>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button (click)="store()">
        <ion-icon name="add"></ion-icon>
    </ion-fab-button>
    <div style="height: 5px"></div>
    <ion-fab-button (click)="delete(selecteds(selectForm.value.selecteds))" color="danger" *ngIf="selecteds(selectForm.value.selecteds)">
        <ion-icon name="trash"></ion-icon>
    </ion-fab-button>
</ion-fab>