<ion-content>
    <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
    </ion-text>
    <form [formGroup]="form">
        <ion-grid>
            <ion-row>
                <ion-col size="2" size-xs="12" size-md="3">
                    <ion-label>Modelo:</ion-label>
                    <suite-tags-input placeholder="Modelo" [options]="models" formControlName="models"></suite-tags-input>
                </ion-col>
                <ion-col size="2" size-xs="12" size-md="3">
                    <ion-label>Marca:</ion-label>
                    <suite-tags-input placeholder="Marca" [options]="brands" formControlName="brands"></suite-tags-input>
                </ion-col>
                <ion-col size="2" size-xs="12" size-md="3">
                    <ion-label>Temporada:</ion-label>
                    <suite-tags-input placeholder="Temporada" [options]="seasons" formControlName="seasons"></suite-tags-input>
                </ion-col>
                <ion-col size="2" size-xs="12" size-md="3">
                    <ion-label>Color:</ion-label>
                    <suite-tags-input placeholder="Color" [options]="colors" formControlName="colors"></suite-tags-input>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col size="2" size-xs="12" size-md="3">
                    <ion-item>
                        <!-- <ion-select [(ngModel)]="status" placeholder="Filtrar" (ionChange)="changeValue($event)"> -->
                        <ion-select formControlName="status" placeholder="Filtrar" (ionChange)="changeValue($event)">
                            <ion-select-option *ngFor="let filterType of filterTypes; let i = index" [value]="filterType.id" [attr.selected]="!i">
                                {{ filterType.name }}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-col>
                <!-- <ion-col size="4" [formGroup]="filters"> -->
                    <!--<ion-item>
                        <ion-select formControlName="warehouseId" placeholder="Almacenes" (ionChange)="reSearch()">
                            <ion-select-option *ngFor="let warehouse of warehouses" [value]="warehouse.id">
                                {{warehouse.name}}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>-->
                <!-- </ion-col> -->
            </ion-row>
        </ion-grid>
    </form>
    <suite-responsive-layout>
        <div portrait>

            <mat-accordion multi="false" *ngFor="let price of prices;let i = index">
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <ion-grid>
                            <ion-row>
                                <ion-col size="12">

                                    <mat-panel-title>
                                        <ion-icon name="print" *ngIf="price?.impress"></ion-icon> {{price?.model?.reference}} </mat-panel-title>
                                </ion-col>
                            </ion-row>
                        </ion-grid>

                    </mat-expansion-panel-header>
                    <ion-row>
                        <ion-col>
                            Marca
                        </ion-col>
                        <ion-col class="align-right">
                            {{ price?.model?.brand?.name }}
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            Tallas
                        </ion-col>
                        <ion-col class="align-right">
                          {{ price.rangesNumbers ? price.rangesNumbers.sizeRangeNumberMin && price.rangesNumbers?.sizeRangeNumberMax && price.rangesNumbers.sizeRangeNumberMin == price.rangesNumbers.sizeRangeNumberMax ? price.rangesNumbers.sizeRangeNumberMin : price.rangesNumbers.sizeRangeNumberMin + '-' + price.rangesNumbers.sizeRangeNumberMax : '' }}
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            €
                        </ion-col>
                        <ion-col class="align-right">
                            {{ price?.priceOriginal }}€
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            Desc
                        </ion-col>
                        <ion-col class="align-right">
                            {{ price?.percent }}%
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            € Final
                        </ion-col>
                        <ion-col class="align-right">
                            {{ price?.priceDiscount }}€
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            Estatus
                        </ion-col>
                        <ion-col class="align-right">
                            <ion-icon name="print" *ngIf="getNameOfStatus(price.status) == 'Impresos'"></ion-icon>
                            {{getNameOfStatus(price.status)}}
                        </ion-col>
                    </ion-row>

                    <ion-row>
                        <ion-col>
                            Imprimir
                        </ion-col>
                        <ion-col class="align-right">
                            <ion-checkbox [formControl]="selectedForm['controls']?.toSelect['controls'][i]"></ion-checkbox>
                        </ion-col>
                    </ion-row>
                    <div>

                    </div>
                    <mat-list style="display: flex; justify-content:center;"></mat-list>
                </mat-expansion-panel>
            </mat-accordion>



        </div>
        <div landscape>
            <table mat-table [dataSource]="dataSource">

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

                <ng-container matColumnDef="impress">
                    <th mat-header-cell *matHeaderCellDef>
                        Estatus
                    </th>
                    <td mat-cell *matCellDef="let price">
                        <ion-icon name="print" *ngIf="getNameOfStatus(price.status) == 'Impresos'"></ion-icon>
                        {{getNameOfStatus(price.status)}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="model">
                    <th mat-header-cell *matHeaderCellDef>
                        Modelo
                    </th>
                    <td mat-cell *matCellDef="let price">
                        {{ price?.model?.reference }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="brand">
                    <th mat-header-cell *matHeaderCellDef>
                        Marca
                    </th>
                    <td mat-cell *matCellDef="let price">
                        {{ price?.model?.brand?.name }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="range">
                    <th mat-header-cell *matHeaderCellDef>
                        Tallas
                    </th>
                    <td mat-cell *matCellDef="let price">
                      {{ price.rangesNumbers ? price.rangesNumbers.sizeRangeNumberMin && price.rangesNumbers?.sizeRangeNumberMax && price.rangesNumbers.sizeRangeNumberMin == price.rangesNumbers.sizeRangeNumberMax ? price.rangesNumbers.sizeRangeNumberMin : price.rangesNumbers.sizeRangeNumberMin + '-' + price.rangesNumbers.sizeRangeNumberMax : '' }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef>
                        €
                    </th>
                    <td mat-cell *matCellDef="let price">
                        {{ price?.priceOriginal }}€
                    </td>
                </ng-container>
                <ng-container matColumnDef="percentage">
                    <th mat-header-cell *matHeaderCellDef>Desc.</th>
                    <td mat-cell *matCellDef="let price">
                        {{ price?.percent }}%
                    </td>
                </ng-container>
                <ng-container matColumnDef="discount">
                    <th mat-header-cell *matHeaderCellDef>
                        € final
                    </th>
                    <td mat-cell *matCellDef="let price">
                        {{ price?.priceDiscount }}€
                    </td>
                </ng-container>
                <ng-container matColumnDef="select" [formGroup]="selectedForm">
                    <th mat-header-cell *matHeaderCellDef>
                        <ion-checkbox formControlName="selector" (ionChange)="selectAll($event)"></ion-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let label;let i = index" (click)="prevent($event)">
                        <ng-template [ngIf]="selectedForm['controls']?.toSelect">
                            <ion-checkbox [formControl]="selectedForm['controls']?.toSelect['controls'][i]"></ion-checkbox>
                        </ng-template>
                    </td>
                </ng-container>
            </table>
        </div>
    </suite-responsive-layout>
    <mat-paginator [pageSizeOptions]="pagerValues"></mat-paginator>
</ion-content>
<ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button (click)="printPrices(prices)" *ngIf="selectedForm['controls']?.toSelect && selectedForm.valid">
        <ion-icon name="print"></ion-icon>
    </ion-fab-button>
</ion-fab>