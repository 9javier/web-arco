<form [formGroup]="incidenceForm">
  <ng-container *ngIf="!readed;else read">
    <scanner-manual (newValue)=newValue($event)  placeholder="PRODUCTO"></scanner-manual>
  </ng-container>
  <ng-template #read>
    <ion-item>
      <ion-label>Fecha</ion-label>
      <ion-datetime formControlName="dateDetection" picker-format="DD -MM-YYYY" display-format="DD-MM-YYYY" format></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label class="ion-text-capitalize">defecto</ion-label>
      <ion-select (ionChange)="defectChange($event)" formControlName="defectType" placeholder="Selecciona" [disabled]="barcodeRoute!=null">
        <ion-select-option *ngFor="let defect of defects" [value]="defect.id">{{defect.name +" - "+ defect.defectTypeParent.name}}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label class="ion-text-capitalize">observaciones:</ion-label>
      <ion-input formControlName="observations" type="text" [readonly]="barcodeRoute!=null"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Estado de gestion</ion-label>
      <ion-select *ngIf="barcodeRoute==null"  (ionChange)="gestionChange($event)" placeholder="Selecciona" [disabled]="barcodeRoute!=null">
        <ion-select-option  *ngFor="let item of statusManagament.statuses" [value]="item.id" >{{item.name}}</ion-select-option>
      </ion-select>
      <ion-select *ngIf="barcodeRoute!=null" placeholder="Selecciona" [disabled]="barcodeRoute!=null" formControlName="gestionState">
        <ion-select-option  *ngFor="let item of types" [value]="item.id || 01" >{{item.name || Hola}}</ion-select-option>
      </ion-select>
    </ion-item>
  

     <!--require pass History-->
     <ion-item *ngIf="passHistory == true">
      <ion-label class="ion-text-capitalize">pasar a historial</ion-label>
      <ion-checkbox formControlName="isHistory" slot="end"></ion-checkbox>
    </ion-item>

     <!--require requireContact-->
     <div *ngIf="requireContact == true" class="contact">
      <ion-label class="ion-text-capitalize">Contacto</ion-label><br>
      <ion-item>
        <ion-input type="text" placeholder="Nombre"  [value]="txtName"></ion-input><br>
      </ion-item>
      <ion-item>
        <ion-input type="text" placeholder="Correo"  [value]="txtEmail"></ion-input><br>
      </ion-item>
      <ion-item>
        <ion-input type="text" placeholder="TelÃ©fono"  [value]="txtTel"></ion-input>
      </ion-item>
     </div>
    

    <ion-item *ngIf="requirePhoto == true" (click)="presentModal()" detail lines="none">
      <ion-label class="ion-text-capitalize">foto</ion-label>
      <ion-button>
        <ion-icon name="camera"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon name="images"></ion-icon>      
      </ion-button>
      <ion-label>{{imgUrl}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label class="ion-text-capitalize">retorno fabrica</ion-label>
      <ion-checkbox  formControlName="factoryReturn" slot="end" [readonly]="barcodeRoute!=null"></ion-checkbox>
    </ion-item>

    <!--require imprimir-->
    <ion-item *ngIf="requireOk == true">
      <ion-label class="ion-text-capitalize">Firma</ion-label>
      <ion-button (click)="signModal()"><ion-icon name="finger-print-outline"></ion-icon></ion-button>
    </ion-item>

   

    <ion-button (click)="enviar()" expand="block" shape="round">
      enviar
    </ion-button>
  </ng-template>
</form>

