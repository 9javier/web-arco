<ion-content>
  <ion-row>
    <ion-col id="reset">
      <ion-button (click)="ngOnInit()">
        <ion-icon name="refresh"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
  <div class="table-container" *ngIf="dataSourceUsers">
    <mat-table [dataSource]="dataSourceUsers">
      <ng-container matColumnDef="user">
        <mat-header-cell *matHeaderCellDef>
          <span class="title">Usuario</span>
          <mat-icon matTooltipPosition="above" (click)="openFilterComponent($event, 'user')">{{body.users.length > 0 ? 'playlist_add_check' : 'reorder'}}</mat-icon>
        </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.userName}} </mat-cell>
      </ng-container>
      <ng-container matColumnDef="warehouse">
        <mat-header-cell *matHeaderCellDef>
          <span class="title">Almac√©n</span>
          <mat-icon matTooltipPosition="above" (click)="openFilterComponent($event, 'warehouse')">{{body.warehouses.length > 0 ? 'playlist_add_check' : 'reorder'}}</mat-icon>
        </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.warehouseName}} </mat-cell>
      </ng-container>
      <ng-container *ngFor="let role of dataSourceRoles;let i = index" matColumnDef="{{ role.id }}">
        <mat-header-cell *matHeaderCellDef class="centre-header">{{ role.name }}</mat-header-cell>
        <mat-cell *matCellDef="let element; let id = index" class="centre-cell">
          <mat-checkbox [ngModel] = element.roles[i].checked (change)="changeCheckRol($event, element, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </div>
</ion-content>
<ion-fab vertical="bottom" horizontal="end">
  <ion-row>
    <ion-col>
      <ion-fab-button *ngIf="listToUpdate.length > 0" color="dark"  matTooltip="Guardar" matTooltipClass="tooltip" matTooltipPosition="above" (click)="saveChanges($event)">
        <ion-icon name="save"></ion-icon>
      </ion-fab-button>
    </ion-col>
    <ion-col>
      <ion-fab-button color="dark"  matTooltip="Agregar" matTooltipClass="tooltip" matTooltipPosition="above" (click)="addNewRol()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-col>
    <ion-col>
      <ion-fab-button color="dark"  matTooltip="Limpiar" matTooltipClass="tooltip" matTooltipPosition="above" (click)="refreshAll()">
        <ion-icon name="undo"></ion-icon>
      </ion-fab-button>
    </ion-col>
  </ion-row>
</ion-fab>

