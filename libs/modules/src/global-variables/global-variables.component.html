<ion-content padding="true">
    <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
    </ion-text>
    <ion-grid>
        <ion-row>
            <ion-col size="12">
                <div class="mat-table-wrapper-overflow-x">
                    <table mat-table [dataSource]="dataSource">

                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

                        <tr mat-row (click)="update(row)" *matRowDef="let row; columns: displayedColumns"></tr>

                        <ng-container matColumnDef="type">
                            <th mat-header-cell *matHeaderCellDef>Tipo</th>
                            <td mat-cell *matCellDef="let variable">
                                {{ getTypeById(variable.type) }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="value">
                            <th mat-header-cell *matHeaderCellDef>Valor</th>
                            <td mat-cell *matCellDef="let variable">
                                {{ variable.value }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="selected">
                            <th mat-header-cell *matHeaderCellDef>
                                <ion-checkbox></ion-checkbox>
                            </th>
                            <td mat-cell *matCellDef="let variable;let i = index" (click)="prevent($event)">
                                <ion-checkbox [formControl]="form['controls'].selecteds['controls'][i]['controls']?.selected"></ion-checkbox>
                            </td>
                        </ng-container>
                    </table>
                </div>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-fab vertical="bottom" horizontal="end">
    <ion-fab-button (click)="store()">
        <ion-icon name="add"></ion-icon>
    </ion-fab-button>
    <ion-fab-button (click)="delete(selecteds(form.value.selecteds))" color="danger" *ngIf="selecteds(form.value.selecteds).length">
        <ion-icon name="trash"></ion-icon>
    </ion-fab-button>
</ion-fab>