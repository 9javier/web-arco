<div class="content">
  <div class="audit-info">
    <p class="packing">{{ jaula }}</p>
    <p class="destiny" *ngIf="destinyPacking">destino <b>{{ destinyPacking }}</b></p>
  </div>

  <scanner-manual [placeholder]="'PRODUCTO'" (newValue)="userTyping($event)" [height]="'30vh'"></scanner-manual>

  <div class="footer">
    <div routerDirection="'root'" routerLink="/audits" (click)="backView()" class="button cancel">
      <button>VOLVER</button>
    </div>
    <div routerDirection="'root'" routerLink="/audits" (click)="finishAudit()" class="button finish">
      <button>FINALIZAR</button>
    </div>
  </div>

  <div class="product-list">
    <mat-list [ngClass]="destinyPacking ? 'product-list-smaller' : ''">
      <mat-list-item *ngFor="let packingProduct of packingProducts">
        <mat-icon matListIcon
          [ngClass]="packingProduct.audit.isAudit ? packingProduct.audit.rightAudit ? 'ok' : 'ko' : 'not-audit'">
          {{ packingProduct.audit.isAudit ? (packingProduct.audit.rightAudit ? 'check_circle' : 'cancel') : 'info'}}
        </mat-icon>
        <div *ngIf="packingProduct.product.reference">
          <h3 matLine><b>{{packingProduct.product.reference}}</b></h3>
          <p matLine>
            <span> {{packingProduct.product.model.reference}} - {{packingProduct.product.model.brand.name}} </span>
          </p>
          <p matLine>
            <span> T - {{packingProduct.product.size.name}} </span>
          </p>
          <p matLine *ngIf="packingProduct.audit.isAudit && !packingProduct.audit.rightAudit">
            <span> destino: <b>{{packingProduct.destinyProduct.reference}} {{packingProduct.destinyProduct.name}}</b>
            </span>
          </p>
        </div>

        <div *ngIf="packingProduct.product.uniqueCode">
          <h3 matLine><b>{{packingProduct.product.uniqueCode}}</b></h3>
          <p matLine>
            <span> Pedido: {{ packingProduct.product?.order.deliveryRequestExternalId }}</span>
          </p>
          <p matLine *ngIf="packingProduct.audit.isAudit && !packingProduct.audit.rightAudit">
            <span> destino: <b>{{packingProduct.destinyProduct.reference}} {{packingProduct.destinyProduct.name}}</b>
            </span>
          </p>
        </div>

      </mat-list-item>
    </mat-list>

    <button *ngIf="packingProducts && packingProducts.length > 0" mat-mini-fab class="fab-filter"
      (click)="filterProducts($event)" color="dark">
      <mat-icon>filter_list</mat-icon>
    </button>
  </div>
</div>