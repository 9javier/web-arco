<ion-content class="ion-padding">
    <ion-text color="primary">
        <suite-breadcrumb></suite-breadcrumb>
    </ion-text>
    <div class="table-container"></div>
        <table mat-table [dataSource]="dataSource" class="table-incidences">

                <ng-container matColumnDef="code">
                  <th mat-header-cell *matHeaderCellDef> Codigo </th>
                  <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                </ng-container>
              
                <ng-container matColumnDef="country">
                  <th mat-header-cell *matHeaderCellDef> País </th>
                  <td mat-cell *matCellDef="let element"> {{element.country.name}} </td>
                </ng-container>
              
                <ng-container matColumnDef="province">
                  <th mat-header-cell *matHeaderCellDef> Provincia </th>
                  <td mat-cell *matCellDef="let element"> {{element.province.name}} </td>
                </ng-container>

                <ng-container matColumnDef="postalCode">
                  <th mat-header-cell *matHeaderCellDef> Código postal </th>
                  <td mat-cell *matCellDef="let element"> {{element.postalCode.name}} </td>
                </ng-container>
              
                <ng-container matColumnDef="select" [formGroup]="selectedForm">
                        <th mat-header-cell *matHeaderCellDef>
                            <ion-checkbox (ionChange)="selectAll($event)"></ion-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let building;let i = index" (click)="prevent($event)">
                            <ng-template [ngIf]="selectedForm['controls']?.toSelect">
                                <ion-checkbox [formControl]="selectedForm['controls']?.toSelect['controls'][i]['controls']['selected']"></ion-checkbox>
                            </ng-template>
                        </td>
                    </ng-container>

                <tr mat-header-row *matHeaderRowDef="columns"></tr>
                <tr (click)="updateRegion(row)" mat-row *matRowDef="let row; columns: columns;"></tr>
              </table>
</ion-content>
<ion-fab vertical="bottom" horizontal="end">
        <ion-fab-button *ngIf="selectedForm.valid && selectedForm['controls']?.toSelect" color="danger" (click)="deleteRegions()">
            <ion-icon name="trash"></ion-icon>
        </ion-fab-button>
        <br>
        <ion-fab-button (click)="storeRegion()">
            <ion-icon name="add"></ion-icon>
        </ion-fab-button>
    </ion-fab>