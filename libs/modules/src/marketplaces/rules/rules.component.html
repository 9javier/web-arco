<div class="mp-rules-wrapper">
  <mat-accordion>
    <mat-expansion-panel #categories hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Categor√≠as
        </mat-panel-title>
        <mat-panel-description>
          <i class="material-icons" *ngIf="!categories.expanded">add</i>
          <span class="white-space" *ngIf="!categories.expanded">&nbsp;</span>
          <i class="material-icons" *ngIf="categories.expanded">remove</i>
          <i class="material-icons" *ngIf="categories.expanded">warning</i>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="mp-rules-expansion-panel-content">
        <div *ngIf="dataSourceCategories.length">
          <table mat-table [dataSource]="dataSourceRulesCategories">

            <tr mat-header-row *matHeaderRowDef="displayedCategoriesColumns; sticky: true;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedCategoriesColumns;"></tr>

            <ng-container matColumnDef="name">
              <th class="mp-rules-table-name-column" mat-header-cell *matHeaderCellDef>
                <span>Nombre</span>
              </th>
              <td class="mp-rules-table-name-column" mat-cell *matCellDef="let element">
                <span>{{element.name}}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="categories">
              <th class="mp-rules-table-filter-column" mat-header-cell *matHeaderCellDef>
                <span>Filtros</span>
              </th>
              <td class="mp-rules-table-filter-column" mat-cell *matCellDef="let element">
                <span *ngIf="element.description != ''">
                  {{element.description}}
                </span>
                <span *ngIf="element.description == ''" class="no-items-list-text">
                  Sin filtros (todos los productos)
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="products">
              <th class="mp-rules-table-products-column" mat-header-cell *matHeaderCellDef>
                <span></span>
              </th>
              <td class="mp-rules-table-products-column" mat-cell *matCellDef="let element">
                <span *ngIf="element.products == 1">{{element.products}} producto</span>
                <span *ngIf="element.products != 1">{{element.products}} productos</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="edit">
              <th class="mp-rules-table-edit-column" mat-header-cell *matHeaderCellDef>
                <span>Editar</span>
              </th>
              <td class="mp-rules-table-edit-column" mat-cell *matCellDef="let element">
              <span>
                <i class="material-icons" (click)="editRule(element)">edit</i>
              </span>
              </td>
            </ng-container>

          </table>
        </div>
        <button class="mp-rules-new-rule-button" (click)="openModalNewRule('categories')">NUEVA REGLA</button>
      </div>

    </mat-expansion-panel>

    <mat-expansion-panel #enabling hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Desactivar
        </mat-panel-title>
        <mat-panel-description>
          <i class="material-icons" *ngIf="!enabling.expanded">add</i>
          <span class="white-space" *ngIf="!enabling.expanded">&nbsp;</span>
          <i class="material-icons" *ngIf="enabling.expanded">remove</i>
          <i class="material-icons" *ngIf="enabling.expanded">warning</i>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="mp-rules-expansion-panel-content">
        <div *ngIf="dataSourceEnabling.length">
          <table mat-table [dataSource]="dataSourceRulesEnabling">

            <tr mat-header-row *matHeaderRowDef="displayedEnablingColumns; sticky: true;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedEnablingColumns;"></tr>

            <ng-container matColumnDef="name">
              <th class="mp-rules-table-name-column" mat-header-cell *matHeaderCellDef>
                <span>Nombre</span>
              </th>
              <td class="mp-rules-table-name-column" mat-cell *matCellDef="let element">
                <span>{{element.name}}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="categories">
              <th class="mp-rules-table-filter-column" mat-header-cell *matHeaderCellDef>
                <span>Filtros</span>
              </th>
              <td class="mp-rules-table-filter-column" mat-cell *matCellDef="let element">
                <span *ngIf="element.description != ''">
                  {{element.description}}
                </span>
                <span *ngIf="element.description == ''" class="no-items-list-text">
                  Sin filtros (todos los productos)
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="products">
              <th class="mp-rules-table-products-column" mat-header-cell *matHeaderCellDef>
                <span></span>
              </th>
              <td class="mp-rules-table-products-column" mat-cell *matCellDef="let element">
                <span *ngIf="element.products == 1">{{element.products}} producto</span>
                <span *ngIf="element.products != 1">{{element.products}} productos</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="edit">
              <th class="mp-rules-table-edit-column" mat-header-cell *matHeaderCellDef>
                <span>Editar</span>
              </th>
              <td class="mp-rules-table-edit-column" mat-cell *matCellDef="let element">
              <span>
                <i class="material-icons" (click)="editRule(element)">edit</i>
              </span>
              </td>
            </ng-container>

          </table>
        </div>
        <button class="mp-rules-new-rule-button" (click)="openModalNewRule('enabling')">NUEVA REGLA</button>
      </div>

    </mat-expansion-panel>

    <mat-expansion-panel #stocks hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Stocks
        </mat-panel-title>
        <mat-panel-description>
          <i class="material-icons" *ngIf="!stocks.expanded">add</i>
          <span class="white-space" *ngIf="!stocks.expanded">&nbsp;</span>
          <i class="material-icons" *ngIf="stocks.expanded">remove</i>
          <i class="material-icons" *ngIf="stocks.expanded">warning</i>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="mp-rules-expansion-panel-content">
        <div *ngIf="dataSourceStocks.length">
          <table mat-table [dataSource]="dataSourceRulesStocks">

            <tr mat-header-row *matHeaderRowDef="displayedStocksColumns; sticky: true;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedStocksColumns;"></tr>

            <ng-container matColumnDef="name">
              <th class="mp-rules-table-name-column" mat-header-cell *matHeaderCellDef>
                <span>Nombre</span>
              </th>
              <td class="mp-rules-table-name-column" mat-cell *matCellDef="let element">
                <span>{{element.name}}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="stock">
              <th class="mp-rules-table-filter-column" mat-header-cell *matHeaderCellDef>
                <span>Stock de seguridad</span>
              </th>
              <td class="mp-rules-table-filter-column" mat-cell *matCellDef="let element">
                <span>{{element.stockFilter}}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="products">
              <th class="mp-rules-table-products-column" mat-header-cell *matHeaderCellDef>
                <span></span>
              </th>
              <td class="mp-rules-table-products-column" mat-cell *matCellDef="let element">
                <span *ngIf="element.products == 1">{{element.products}} producto</span>
                <span *ngIf="element.products != 1">{{element.products}} productos</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="edit">
              <th class="mp-rules-table-edit-column" mat-header-cell *matHeaderCellDef>
                <span>Editar</span>
              </th>
              <td class="mp-rules-table-edit-column" mat-cell *matCellDef="let element">
              <span>
                <i class="material-icons" (click)="editRule(element)">edit</i>
              </span>
              </td>
            </ng-container>

          </table>
        </div>
        <button class="mp-rules-new-rule-button" (click)="openModalNewRule('stock')">NUEVA REGLA</button>
      </div>
    </mat-expansion-panel>

  </mat-accordion>
</div>
