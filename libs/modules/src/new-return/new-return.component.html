<ion-content>
  <ion-grid *ngIf="return">
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">ID</ion-label>
          <ion-input disabled>{{return.id == 0 ? 'Este campo se rellenará automáticamente al guardar.' : return.id}}</ion-input>
        </ion-item>
      </ion-col>
      <ion-col class="center-contents">
        <ion-button>Unidades</ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Tipo</ion-label>
          <ion-select [value]="return.type ? return.type.name : ''" placeholder="Seleccione un tipo">
            <ion-select-option *ngFor="let type of types" (click)="return.type = type">{{type.name}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Almacén</ion-label>
          <ion-select [value]="return.warehouse ? return.warehouse.reference+' - '+return.warehouse.name : ''" placeholder="Seleccione un almacén">
            <ion-select-option *ngFor="let warehouse of warehouses" (click)="return.warehouse = warehouse">{{warehouse.reference+' - '+warehouse.name}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Proveedor</ion-label>
          <ion-select [value]="return.provider ? return.provider.name : ''" placeholder="Seleccione un proveedor">
            <ion-select-option *ngFor="let provider of providers" (click)="return.provider = provider">{{provider.name}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Jaulas contenedoras</ion-label>
          <ion-input [(ngModel)]="return.packings" disabled></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Marcas</ion-label>
          <ion-input *ngIf="!return.provider" disabled placeholder="Debe seleccionar un proveedor."></ion-input>
          <ion-select *ngIf="return.provider" [selectedText]="getBrandNameList(return.brands)" multiple (ionChange)="selectBrands($event)" [value]="getSelectedBrandIds()">
            <ion-select-option *ngFor="let brand of getProviderBrands()" value="{{brand.id}}">{{brand.name}}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-row class="no-padding">
          <ion-col class="no-padding">
            <ion-item>
              <ion-label position="stacked">Último estado</ion-label>
              <ion-input disabled>{{getStatusName(return.lastStatus)}}</ion-input>
            </ion-item>
          </ion-col>
          <ion-col class="no-padding">
            <ion-item>
              <ion-label position="stacked">Cambiar estado</ion-label>
              <ion-select [value]="''" placeholder="Seleccione un nuevo estado">
                <ion-select-option *ngFor="let status of [1,2,3,4,5,6]" (click)="changeStatus(status)">{{getStatusName(status)}}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Devolver antes de</ion-label>
          <ion-datetime [(ngModel)]="return.dateReturnBefore" displayFormat="DD/MM/YYYY" placeholder="Seleccione una fecha"></ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Fecha último estado</ion-label>
          <ion-datetime [(ngModel)]="return.dateLastStatus" disabled displayFormat="DD/MM/YYYY" placeholder="Esta fecha se rellenará automáticamente."></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Correo de contacto</ion-label>
          <ion-input [(ngModel)]="return.email"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Usuario</ion-label>
          <ion-input disabled>{{return.user.name}}</ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Observaciones</ion-label>
          <ion-input [(ngModel)]="return.observations"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Nº Bultos</ion-label>
          <ion-input [(ngModel)]="return.amountPackages"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Impresión de etiquetas bultos</ion-label>
          <span>
            OFF
            <ion-toggle [(ngModel)]="return.printTagPackages"></ion-toggle>
            ON
          </span>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Agencia transportista</ion-label>
          <ion-input [(ngModel)]="return.shipper"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Fecha de recogida</ion-label>
          <ion-datetime [(ngModel)]="return.datePickup" disabled displayFormat="DD/MM/YYYY" placeholder="Esta fecha se rellenará automáticamente."></ion-datetime>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="stacked">Fecha prevista de recogida</ion-label>
          <ion-datetime [(ngModel)]="return.datePredictedPickup" displayFormat="DD/MM/YYYY" placeholder="Seleccione una fecha"></ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col></ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="center-contents">
        <ion-button>Impresión/envío de albarán</ion-button>
      </ion-col>
      <ion-col class="center-contents">
        <ion-button>Adjuntar archivos/imágenes</ion-button>
      </ion-col>
      <ion-col class="center-contents">
        <ion-button>Imagen albarán agencia</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="save()">
      <ion-icon name="save"></ion-icon>
    </ion-fab-button>
    <ion-fab-button (click)="router.navigateByUrl('/return-tracking-list')">
      <ion-icon name="close"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>
